import{y as v,H as S,ah as k,m as B,l as V,C as K,u as x,aj as f,_ as C,r as u,o as c,c as d,a as l,t as a,b as t,ai as p,w as m,d as n,F as w,v as P,e as E}from"../../assets/app-73d10358.js";const U={components:{BaseButton:v,BaseInputText:S,BasePassword:k},data(){return{user:{name:null,user_name:null,email:null,password:null,ref_code:null},loadingSignup:!1,disableSignup:!1,error:{name:null,user_name:null,email:null,password:null}}},mounted(){this.config.signupEnableRecapcha&&window.siteConfig.recapchaPublicKey&&(this.disableSignup=!0,setTimeout(()=>{this.$recaptchaInstance.value.showBadge(),this.disableSignup=!1},3e3))},unmounted(){this.config.signupEnableRecapcha&&window.siteConfig.recapchaPublicKey&&this.$recaptchaInstance.value.hideBadge()},computed:{...B(V,["config"])},methods:{...K(x,["signupUser"]),async signup(){if(!this.loadingSignup){this.loadingSignup=!0;try{this.config.signupEnableRecapcha&&window.siteConfig.recapchaPublicKey&&await this.$recaptcha("signup").then(r=>{this.user.token=r});const e=f.get("ref_code",null);e&&(this.user.ref_code=e),await this.signupUser(this.user),this.resetErrors(this.error),e&&f.remove("ref_code"),window.location.href=window.siteConfig.siteUrl}catch(e){this.resetErrors(this.error),e.error.code=="error_validate"?Object.keys(this.error).forEach(r=>this.error[r]=e.error.detail[r]?e.error.detail[r]:null):e.error.code=="inactive"?(this.showError(e.error.message),this.$router.push({name:"home"})):this.showError(e.error)}finally{this.loadingSignup=!1}}}}},T={class:"widget-box bg-white rounded-base mb-base-2 max-w-full w-full sm:w-96 p-7 mx-auto dark:bg-slate-800"},N={class:"text-base-lg font-extrabold mb-5 dark:text-white"},A={class:"mt-base-2 text-center"},j={class:"mt-4 border-t border-divider pt-4"},F={class:"text-center"},I={class:"flex justify-center flex-wrap gap-3 my-4"},R=["href"],D=["src","alt"],L={class:"text-center"};function O(e,r,$,H,s,i){const h=u("BaseInputText"),b=u("BasePassword"),y=u("BaseButton"),g=u("router-link");return c(),d("div",T,[l("h3",N,a(e.$t("Sign up")),1),t(h,{modelValue:s.user.name,"onUpdate:modelValue":r[0]||(r[0]=o=>s.user.name=o),placeholder:e.$t("Name"),error:s.error.name,left_icon:"profile",autocomplete:"name",onKeyup:p(i.signup,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),t(h,{modelValue:s.user.user_name,"onUpdate:modelValue":r[1]||(r[1]=o=>s.user.user_name=o),placeholder:e.$t("Username"),error:s.error.user_name,left_icon:"profile",onKeyup:p(i.signup,["enter"]),autocomplete:"nickname",class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),t(h,{modelValue:s.user.email,"onUpdate:modelValue":r[2]||(r[2]=o=>s.user.email=o),placeholder:e.$t("Email"),error:s.error.email,left_icon:"invite",onKeyup:p(i.signup,["enter"]),autocomplete:"on",class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),t(b,{modelValue:s.user.password,"onUpdate:modelValue":r[3]||(r[3]=o=>s.user.password=o),error:s.error.password,placeholder:e.$t("Password"),onKeyup:p(i.signup,["enter"]),class:"mb-base-2"},null,8,["modelValue","error","placeholder","onKeyup"]),t(y,{loading:s.loadingSignup,disabled:s.disableSignup,onClick:i.signup,class:"w-full"},{default:m(()=>[n(a(e.$t("Sign up")),1)]),_:1},8,["loading","disabled","onClick"]),l("div",A,[n(a(e.$t("By clicking Sign Up, you agree to our ")),1),t(g,{to:{name:"sp_detail",params:{slug:"terms-of-service"}},class:"text-primary-color dark:text-dark-primary-color"},{default:m(()=>[n(a(e.$t("Terms of Service")),1)]),_:1}),n(" "+a(e.$t("and"))+" ",1),t(g,{to:{name:"sp_detail",params:{slug:"privacy-policy"}},class:"text-primary-color dark:text-dark-primary-color"},{default:m(()=>[n(a(e.$t("Privacy Policy")),1)]),_:1}),r[4]||(r[4]=n("."))]),l("div",j,[e.config.openidProviders.length>0?(c(),d(w,{key:0},[l("div",F,a(e.$t("Or Sign up using")),1),l("div",I,[(c(!0),d(w,null,P(e.config.openidProviders,(o,_)=>(c(),d("a",{key:_,href:o.href},[l("img",{class:"max-w-[2rem]",src:o.photo,alt:o.name},null,8,D)],8,R))),128))])],64)):E("",!0),l("div",L,[n(a(e.$t("Already had an account?"))+"Â ",1),t(g,{to:{name:"login"},class:"text-primary-color dark:text-dark-primary-color"},{default:m(()=>[n(a(e.$t("Login")),1)]),_:1})])])])}const z=C(U,[["render",O]]);export{z as default};
