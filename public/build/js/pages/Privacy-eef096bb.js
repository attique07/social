import{B as _}from"./BaseSwitch-b9495672.js";import{_ as g,O as w,a5 as x,y as b,bU as V,bV as B,r as n,o,g as S,c as u,a as s,t as i,b as r,F as L,v as P,w as k,a3 as E,d as U}from"../../assets/app-73d10358.js";const N={components:{BaseSwitch:_,Loading:w,BaseSelect:x,BaseButton:b},mounted(){this.getPrivacySettings(),this.privacyLists=[{value:1,name:this.$t("Everyone")},{value:2,name:this.$t("My followers")},{value:3,name:this.$t("Only me")}],this.chatPrivacyLists=[{value:1,name:this.$t("Everyone")},{value:2,name:this.$t("My followers")},{value:3,name:this.$t("No One")}]},data(){return{loading_status:!0,settings:[],privacy:1,privacyLists:null,chat_privacy:1,chatPrivacyLists:null,success:null,error:null,loading:!1}},methods:{labelText(e){switch(e){case"show_following":return this.$t("View my followings");case"show_follower":return this.$t("View my followers");default:return null}},async getPrivacySettings(){try{const e=await V();return this.privacy=e.privacy,this.chat_privacy=e.chat_privacy,this.settings=window._.map(e.settings,function(t,d){return{name:d,value:t}}),this.loading_status=!1,e}catch{this.loading_status=!1}},async saveSetting(){if(!this.loading){this.loading=!0;try{var e={privacy:this.privacy,chat_privacy:this.chat_privacy};window._.forEach(this.settings,function(t){e[t.name]=t.value}),await B(e),this.showSuccess(this.$t("Your changes have been saved."))}catch(t){this.showError(t.error)}finally{this.loading=!1}}}}},M={class:"flex flex-wrap gap-x-6 mb-3"},O={class:"md:flex-1 md:text-end w-full mb-1"},T={class:"md:flex-2 w-full"},C={class:"flex flex-wrap gap-x-6 mb-3"},F={class:"md:flex-1 md:text-end w-full mb-1"},W={class:"md:flex-2 w-full"},$={class:"flex-2 sm:flex-1 md:text-end w-full mb-1"},D={class:"flex-1 sm:flex-2 w-full"},Y={class:"text-center mt-8"};function j(e,t,d,q,a,c){const v=n("Loading"),m=n("BaseSelect"),p=n("BaseSwitch"),f=n("BaseButton");return a.loading_status?(o(),S(v,{key:0})):(o(),u("form",{key:1,onSubmit:t[2]||(t[2]=E((...l)=>c.saveSetting&&c.saveSetting(...l),["prevent"]))},[s("div",M,[s("div",O,[s("label",null,i(e.$t("Who can see your posts and other account information")),1)]),s("div",T,[r(m,{modelValue:a.privacy,"onUpdate:modelValue":t[0]||(t[0]=l=>a.privacy=l),options:a.privacyLists,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),s("div",C,[s("div",F,[s("label",null,i(e.$t("Who can send you a message")),1)]),s("div",W,[r(m,{modelValue:a.chat_privacy,"onUpdate:modelValue":t[1]||(t[1]=l=>a.chat_privacy=l),options:a.chatPrivacyLists,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),(o(!0),u(L,null,P(a.settings,(l,h)=>(o(),u("div",{key:l.name,class:"flex flex-wrap gap-x-6 mb-3"},[s("div",$,[s("label",null,i(c.labelText(l.name)),1)]),s("div",D,[r(p,{modelValue:a.settings[h].value,"onUpdate:modelValue":y=>a.settings[h].value=y},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),s("div",Y,[r(f,{loading:a.loading},{default:k(()=>[U(i(e.$t("Save")),1)]),_:1},8,["loading"])])],32))}const G=g(N,[["render",j]]);export{G as default};
