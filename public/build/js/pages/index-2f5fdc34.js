import{_ as w,B as k,y as v,aN as x,O as T,J as B,m as I,u as C,q as H,bH as S,ag as N,r as l,o as s,c as u,g as c,w as d,d as o,t as a,e as f,a as n,x as y,b as m,a7 as F,F as P}from"../../assets/app-73d10358.js";import E from"./PostsSearch-ab90f7fc.js";import U from"./UsersSearch-7eeb1e29.js";import V from"./PageSearch-974b2504.js";import"./PostListsItem-021b25db.js";import"./PostDetailModal-38c76a2f.js";import"./CommentsList-b62f7880.js";import"./UserPagesList-4933c246.js";const j={components:{BaseIcon:k,BaseButton:v,Error:x,Loading:T},data(){return{currentTab:this.type,hashtagChar:B.HASHTAG,loading_query:this.search_type==="hashtag",query:null,queryInfo:null,error:null}},created(){this.query=window._.isNil(this.$route.query.q)?"":this.$route.query.q,this.search_type==="hashtag"&&this.getHashtagInfo(this.query)},watch:{$route(){this.query=window._.isNil(this.$route.query.q)?"":this.$route.query.q,this.search_type==="hashtag"&&this.query&&this.getHashtagInfo(this.query)}},props:["search_type","type"],computed:{...I(C,["authenticated"]),searchTypeComponent(){if(this.query!="")switch(this.currentTab){case"user":return U;case"page":return V;default:return E}return null}},methods:{changeTab(e){this.currentTab=e;let t=this.$router.resolve({name:"search",params:{search_type:this.search_type,type:this.currentTab},query:{q:this.query}});H(t.fullPath)},async getHashtagInfo(e){try{const t=await S(e);this.queryInfo=t,this.loading_query=!1}catch{this.loading_query=!1}},async toggleFollowHashtag(){try{await N({name:this.queryInfo.name,action:this.queryInfo.is_followed?"unfollow":"follow"}),this.queryInfo.is_followed=!this.queryInfo.is_followed}catch(e){this.showError(e.error)}}}},A={class:"page-title mb-base-2"},L={key:0},D={key:1},z={key:1},G={class:"profile-menu-list flex flex-wrap mb-base-2 gap-base-2"};function J(e,t,g,O,r,i){const b=l("Error"),q=l("Loading"),_=l("BaseButton"),h=l("BaseIcon");return s(),u(P,null,[r.error?(s(),c(b,{key:0},{default:d(()=>[o(a(r.error),1)]),_:1})):f("",!0),n("h1",A,[g.search_type==="hashtag"?(s(),u("div",L,[r.loading_query?(s(),c(q,{key:0})):(s(),u("div",D,[o(a(r.hashtagChar+r.query)+" ",1),r.queryInfo&&e.authenticated?(s(),c(_,{key:0,onClick:t[0]||(t[0]=p=>i.toggleFollowHashtag())},{default:d(()=>[o(a(r.queryInfo.is_followed?e.$t("Unfollow"):e.$t("Follow")),1)]),_:1})):f("",!0)]))])):(s(),u("div",z,a(e.$t("Search")+": "+r.query),1))]),n("div",null,[n("div",G,[n("div",{class:y(["profile-menu-list-item flex flex-1 min-w-[200px] items-center justify-center rounded-none md:rounded-base-lg gap-2 p-3 text-base-sm cursor-pointer",r.currentTab==="post"?"active bg-primary-color text-white dark:bg-dark-primary-color":"bg-white dark:bg-slate-800"]),onClick:t[1]||(t[1]=p=>i.changeTab("post"))},[m(h,{name:"lists"}),o(" "+a(e.$t("Post")),1)],2),n("div",{class:y(["profile-menu-list-item flex flex-1 min-w-[200px] items-center justify-center rounded-none md:rounded-base-lg gap-2 p-3 text-base-sm cursor-pointer",r.currentTab==="user"?"active bg-primary-color text-white dark:bg-dark-primary-color":"bg-white dark:bg-slate-800"]),onClick:t[2]||(t[2]=p=>i.changeTab("user"))},[m(h,{name:"profile"}),o(" "+a(e.$t("People")),1)],2),n("div",{class:y(["profile-menu-list-item flex flex-1 min-w-[200px] items-center justify-center rounded-none md:rounded-base-lg gap-2 p-3 text-base-sm cursor-pointer",r.currentTab==="page"?"active bg-primary-color text-white dark:bg-dark-primary-color":"bg-white dark:bg-slate-800"]),onClick:t[3]||(t[3]=p=>i.changeTab("page"))},[m(h,{name:"briefcase"}),o(" "+a(e.$t("Page")),1)],2)]),(s(),c(F(i.searchTypeComponent),{search_type:g.search_type,type:r.currentTab,query:r.query},null,8,["search_type","type","query"]))])],64)}const $=w(j,[["render",J]]);export{$ as default};
