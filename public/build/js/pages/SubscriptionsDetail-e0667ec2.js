import{a as g,b as y}from"./subscription-540655cb.js";import{_ as k,O as f,y as w,r as d,o as r,c as i,g as T,e as b,a as t,t as e,b as h,F as l,v as D,w as S,d as v}from"../../assets/app-73d10358.js";import{C as B}from"./CurrentPlan-52592e18.js";const L={props:["id"],components:{Loading:f,BaseButton:w,CurrentPlan:B},data(){return{subscriptionDetail:null,loadingTransaction:!0,loadmoreTransaction:!1,transactionsList:[],currentPage:1}},mounted(){this.getSubscriptionDetail(this.id),this.getSubscriptionTransactions(this.id,this.currentPage)},methods:{async getSubscriptionDetail(s){try{const o=await g(s);this.subscriptionDetail=o}catch(o){this.showError(o.error)}},async getSubscriptionTransactions(s,o){try{const a=await y(s,o);o===1?this.transactionsList=a.items:this.transactionsList=window._.concat(this.transactionsList,a.items),a.has_next_page?(this.loadmoreTransaction=!0,this.currentPage++):this.loadmoreTransaction=!1,this.loadingTransaction=!1}catch(a){this.showError(a.error)}},handleUpdateSubscription(s){this.getSubscriptionDetail(s)}}},x={class:"mb-base-2 font-bold"},C={class:"relative overflow-x-auto border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},P={class:"w-full text-sm whitespace-nowrap text-center"},N={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},V={scope:"col",class:"p-3 text-start"},U={scope:"col",class:"p-3"},E={scope:"col",class:"p-3"},F={scope:"col",class:"p-3"},$={key:0},A={colspan:"4"},I={class:"p-3 text-start"},O={class:"p-3"},j={class:"p-3"},q={class:"p-3"},z={key:1,class:"border-b border-table-border-color dark:border-gray-700"},G={colspan:"4",class:"p-3"},H={key:1,class:"text-center my-base-2"};function J(s,o,a,K,n,p){const u=d("CurrentPlan"),_=d("Loading"),m=d("BaseButton");return r(),i(l,null,[n.subscriptionDetail?(r(),T(u,{key:0,subscription:n.subscriptionDetail,onUpdate:p.handleUpdateSubscription,class:"mb-base-2"},null,8,["subscription","onUpdate"])):b("",!0),t("div",x,e(s.$t("Payment history")),1),t("div",C,[t("table",P,[t("thead",N,[t("tr",null,[t("th",V,e(s.$t("Date")),1),t("th",U,e(s.$t("Status")),1),t("th",E,e(s.$t("Transaction ID")),1),t("th",F,e(s.$t("Amount")),1)])]),t("tbody",null,[n.loadingTransaction?(r(),i("tr",$,[t("td",A,[h(_,{class:"mt-base-2"})])])):(r(),i(l,{key:1},[n.transactionsList.length?(r(!0),i(l,{key:0},D(n.transactionsList,c=>(r(),i("tr",{key:c.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[t("td",I,e(c.date),1),t("td",O,e(c.status_text),1),t("td",j,e(c.transaction_id),1),t("td",q,e(c.price),1)]))),128)):(r(),i("tr",z,[t("td",G,e(s.$t("No Transactions")),1)]))],64))])])]),n.loadmoreTransaction?(r(),i("div",H,[h(m,{onClick:o[0]||(o[0]=c=>p.getSubscriptionTransactions(a.id,n.currentPage))},{default:S(()=>[v(e(s.$t("View more")),1)]),_:1})])):b("",!0)],64)}const W=k(L,[["render",J]]);export{W as default};
