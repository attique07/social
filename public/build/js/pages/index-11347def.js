import{_ as y,y as v,H as S,ah as k,b5 as C,bD as V,bE as B,bF as x,r as p,o as i,c as u,b as n,a as o,t,ai as f,w as c,d,e as h,F as P}from"../../assets/app-73d10358.js";const F={components:{BaseButton:v,BaseInputText:S,BasePassword:k,Logo:C},data(){return{currentStep:1,email:null,code:null,password:null,password_confirmed:null,error:{email:null,code:null,password:null,password_confirmed:null},loading:!1,loading_send:!1}},methods:{async sendCodeForEmail(){if(!this.loading_send){this.loading_send=!0;try{await V({email:this.email}),this.currentStep===2&&this.showSuccess(this.$t("Your code has been sent.")),this.currentStep=2}catch(e){this.error.email=e.error.detail.email}finally{this.loading_send=!1}}},async checkValidateCode(){if(!this.loading){this.loading=!0;try{await B({email:this.email,code:this.code}),this.currentStep=3}catch(e){this.error.code=e.error.detail.code}finally{this.loading=!1}}},async updatepassword(){if(!this.loading){this.loading=!0;try{await x({password:this.password,password_confirmed:this.password_confirmed,email:this.email,code:this.code}),this.currentStep=4}catch{this.resetErrors(this.error)}finally{this.loading=!1}}},nextStep(){this.currentStep===1?this.sendCodeForEmail():this.currentStep===2?this.checkValidateCode():this.currentStep===3&&this.updatepassword()}}},K={class:"bg-white rounded-base w-full sm:w-96 p-7 mx-auto mb-base-2 dark:bg-slate-800 dark:text-white"},E={key:0},L={class:"flex items-center justify-between mb-4"},U={class:"text-base-lg font-extrabold"},j={class:"mb-4"},N={class:"mt-5 text-center"},T={key:1},I={class:"flex items-center justify-between mb-4"},D={class:"text-base-lg font-extrabold"},Y={class:"mb-4"},A={class:"relative mb-1"},H={key:0,class:"p-error"},R={key:2},W={class:"flex items-center justify-between mb-4"},q={class:"text-base-lg font-extrabold"},z={class:"relative mb-base-2"},G={class:"relative mb-base-2"},J={key:3},M={class:"flex items-center justify-between mb-4"},O={class:"text-base-lg font-extrabold"},Q={class:"mb-4"};function X(e,r,Z,$,s,a){const g=p("Logo"),w=p("BaseInputText"),m=p("BaseButton"),b=p("router-link"),_=p("BasePassword");return i(),u(P,null,[n(g),o("div",K,[s.currentStep===1?(i(),u("div",E,[o("div",L,[o("h3",U,t(e.$t("Forgot password")),1)]),o("p",j,t(e.$t("Please enter your email address to search for your account.")),1),n(w,{modelValue:s.email,"onUpdate:modelValue":r[0]||(r[0]=l=>s.email=l),placeholder:e.$t("Email"),error:s.error.email,left_icon:"invite",autocomplete:"username",onKeyup:f(a.nextStep,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),n(m,{loading:s.loading_send,class:"w-full",onClick:r[1]||(r[1]=l=>a.nextStep())},{default:c(()=>[d(t(e.$t("Continue")),1)]),_:1},8,["loading"]),o("div",N,[d(t(e.$t("Already had an account?"))+" ",1),n(b,{to:{name:"login"}},{default:c(()=>[d(t(e.$t("Login")),1)]),_:1})])])):h("",!0),s.currentStep===2?(i(),u("div",T,[o("div",I,[o("h3",D,t(e.$t("Enter security code")),1)]),o("p",Y,t(e.$t("Please check your email for a message with your code.")),1),o("div",A,[n(w,{modelValue:s.code,"onUpdate:modelValue":r[2]||(r[2]=l=>s.code=l),placeholder:e.$t("Code"),error:s.error.code,onKeyup:f(a.nextStep,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),s.error.code?(i(),u("small",H,t(s.error.code),1)):h("",!0)]),o("p",null,t(e.$t("We sent your code to"))+": "+t(s.email),1),n(m,{loading:s.loading,class:"w-full",onClick:r[3]||(r[3]=l=>a.nextStep())},{default:c(()=>[d(t(e.$t("Continue")),1)]),_:1},8,["loading"]),n(m,{type:"transparent",loading:s.loading_send,class:"w-full",onClick:r[4]||(r[4]=l=>a.sendCodeForEmail())},{default:c(()=>[d(t(e.$t("Resend code")),1)]),_:1},8,["loading"])])):h("",!0),s.currentStep===3?(i(),u("div",R,[o("div",W,[o("h3",q,t(e.$t("Change Password")),1)]),o("div",z,[n(_,{modelValue:s.password,"onUpdate:modelValue":r[5]||(r[5]=l=>s.password=l),placeholder:e.$t("Password"),onKeyup:f(a.nextStep,["enter"]),error:s.error.password},null,8,["modelValue","placeholder","onKeyup","error"])]),o("div",G,[n(_,{modelValue:s.password_confirmed,"onUpdate:modelValue":r[6]||(r[6]=l=>s.password_confirmed=l),placeholder:e.$t("Confirm Password"),onKeyup:f(a.nextStep,["enter"]),error:s.error.password_confirmed},null,8,["modelValue","placeholder","onKeyup","error"])]),n(m,{loading:s.loading,class:"w-full",onClick:r[7]||(r[7]=l=>a.nextStep())},{default:c(()=>[d(t(e.$t("Save")),1)]),_:1},8,["loading"])])):h("",!0),s.currentStep===4?(i(),u("div",J,[o("div",M,[o("h3",O,t(e.$t("Password Updated")),1)]),o("p",Q,t(e.$t("Your password was changed")),1),n(m,{to:{name:"login"},class:"w-full"},{default:c(()=>[d(t(e.$t("Login")),1)]),_:1})])):h("",!0)])],64)}const se=y(F,[["render",X]]);export{se as default};
