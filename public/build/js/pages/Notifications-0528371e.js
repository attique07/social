import{_ as g,O as k,y as x,bQ as v,bR as V,r as p,o as l,g as N,c as a,a as i,t as d,b as m,F as _,v as b,e as B,w as I,a3 as C,d as E}from"../../assets/app-73d10358.js";import{B as R}from"./BaseSwitch-b9495672.js";import{B as T}from"./BaseCheckbox-e4290545.js";const O={components:{BaseSwitch:R,BaseCheckbox:T,Loading:k,BaseButton:x},mounted(){this.getNotificationSettings()},data(){return{loading_status:!0,enable_notify:!0,posts:[],postsSelected:[],systems:[],systemsSelected:[],follows:[],followsSelected:[],chats:[],chatsSelected:[],stories:[],storiesSelected:[],loading:!1}},methods:{labelText(e){switch(e){case"comment":return this.$t("New Comment");case"reply":return this.$t("New Reply");case"like":return this.$t("New Like");case"mention":return this.$t("New Mention");case"share":return this.$t("New Share");case"invite":return this.$t("Notify when your invited users join");case"new_follow":return this.$t("New follower");case"chat_request":return this.$t("New chat request");case"story_end":return this.$t("When the story ends");default:return null}},async getNotificationSettings(){try{const e=await v();return this.enable_notify=e.enable_notify,this.posts=e.post,this.systems=e.system,this.chats=e.chat,this.follows=e.follow,this.stories=e.story,this.postsSelected=window._.map(e.post,function(s,r){if(s)return r}),this.systemsSelected=window._.map(e.system,function(s,r){if(s)return r}),this.followsSelected=window._.map(e.follow,function(s,r){if(s)return r}),this.chatsSelected=window._.map(e.chat,function(s,r){if(s)return r}),this.storiesSelected=window._.map(e.story,function(s,r){if(s)return r}),this.loading_status=!1,e}catch{this.loading_status=!1}},async saveNotificationSetting(){if(!this.loading){this.loading=!0;try{var e={enable_notify:this.enable_notify},s=this.postsSelected,r=this.systemsSelected,y=this.chatsSelected,o=this.followsSelected,c=this.storiesSelected;window._.forEach(this.posts,function(f,n){e[n]=window._.indexOf(s,n)!=-1}),window._.forEach(this.systems,function(f,n){e[n]=window._.indexOf(r,n)!=-1}),window._.forEach(this.follows,function(f,n){e[n]=window._.indexOf(o,n)!=-1}),window._.forEach(this.chats,function(f,n){e[n]=window._.indexOf(y,n)!=-1}),window._.forEach(this.stories,function(f,n){e[n]=window._.indexOf(c,n)!=-1}),await V(e),this.showSuccess(this.$t("Your changes have been saved."))}catch(f){this.showError(f.error)}finally{this.loading=!1}}}}},U={class:"text-main-color dark:text-white"},L={class:"flex justify-between mb-5"},j={key:0},q={class:"font-bold mb-3 dark:text-slate-400"},F=["for"],M={class:"font-bold mb-3 dark:text-slate-400"},A=["for"],D={class:"font-bold mb-3 dark:text-slate-400"},Q=["for"],W={class:"font-bold mb-3 dark:text-slate-400"},Y=["for"],z={class:"font-bold mb-3 dark:text-slate-400"},G=["for"],H={class:"text-center mt-8"};function J(e,s,r,y,o,c){const f=p("Loading"),n=p("BaseSwitch"),w=p("BaseCheckbox"),S=p("BaseButton");return o.loading_status?(l(),N(f,{key:0})):(l(),a("form",{key:1,onSubmit:s[6]||(s[6]=C((...h)=>c.saveNotificationSetting&&c.saveNotificationSetting(...h),["prevent"]))},[i("div",U,[i("div",L,[i("h4",null,d(e.$t("All notification enabled")),1),i("div",null,[m(n,{modelValue:o.enable_notify,"onUpdate:modelValue":s[0]||(s[0]=h=>o.enable_notify=h)},null,8,["modelValue"])])]),o.enable_notify?(l(),a("div",j,[i("h4",q,d(e.$t("Related to your posts and posts youâ€™re interacted with")),1),(l(!0),a(_,null,b(o.posts,(h,t)=>(l(),a("div",{key:t,class:"field-checkbox mb-3"},[m(w,{value:t,inputId:t,modelValue:o.postsSelected,"onUpdate:modelValue":s[1]||(s[1]=u=>o.postsSelected=u)},null,8,["value","inputId","modelValue"]),i("label",{for:t},d(c.labelText(t)),9,F)]))),128)),i("h4",M,d(e.$t("Related to system notifications")),1),(l(!0),a(_,null,b(o.systems,(h,t)=>(l(),a("div",{key:t,class:"field-checkbox mb-3"},[m(w,{value:t,inputId:t,modelValue:o.systemsSelected,"onUpdate:modelValue":s[2]||(s[2]=u=>o.systemsSelected=u)},null,8,["value","inputId","modelValue"]),i("label",{for:t},d(c.labelText(t)),9,A)]))),128)),i("h4",D,d(e.$t("Related to your followers")),1),(l(!0),a(_,null,b(o.follows,(h,t)=>(l(),a("div",{key:t,class:"field-checkbox mb-3"},[m(w,{value:t,inputId:t,modelValue:o.followsSelected,"onUpdate:modelValue":s[3]||(s[3]=u=>o.followsSelected=u)},null,8,["value","inputId","modelValue"]),i("label",{for:t},d(c.labelText(t)),9,Q)]))),128)),i("h4",W,d(e.$t("Related to message")),1),(l(!0),a(_,null,b(o.chats,(h,t)=>(l(),a("div",{key:t,class:"field-checkbox mb-3"},[m(w,{value:t,inputId:t,modelValue:o.chatsSelected,"onUpdate:modelValue":s[4]||(s[4]=u=>o.chatsSelected=u)},null,8,["value","inputId","modelValue"]),i("label",{for:t},d(c.labelText(t)),9,Y)]))),128)),i("h4",z,d(e.$t("Related to story")),1),(l(!0),a(_,null,b(o.stories,(h,t)=>(l(),a("div",{key:t,class:"field-checkbox mb-3"},[m(w,{value:t,inputId:t,modelValue:o.storiesSelected,"onUpdate:modelValue":s[5]||(s[5]=u=>o.storiesSelected=u)},null,8,["value","inputId","modelValue"]),i("label",{for:t},d(c.labelText(t)),9,G)]))),128))])):B("",!0),i("div",H,[m(S,{loading:o.loading},{default:I(()=>[E(d(e.$t("Save")),1)]),_:1},8,["loading"])])])],32))}const Z=g(O,[["render",J]]);export{Z as default};
