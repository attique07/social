import{_ as U,B as k,ag as z,r,o,c as l,F as S,v as B,b as n,w as b,d as x,t as p,a as i,e as _,A as V,D as A,u as K,y as D,O as N,aN as j,U as q,m as P,a_ as M,a$ as O,aH as L,b0 as H,g as f}from"../../assets/app-73d10358.js";import{H as G}from"./HashtagsList-49fe3ffd.js";const J={components:{BaseIcon:k},props:["hashtagsList","target"],methods:{async unFollowHashtag(s){try{await z({name:s,action:"unfollow"}),this.hashtagsList.map(e=>(e.name===s&&(e.is_followed=!1),e)),this.$emit("unfollow_signup_hashtag",s)}catch(e){this.showError(e.error)}}},emits:["unfollow_signup_hashtag"]},Q={key:0,class:"boxes-list flex flex-wrap gap-2"},R=["onClick"];function W(s,e,g,y,t,a){const m=r("router-link"),u=r("BaseIcon");return g.hashtagsList.length>0?(o(),l("div",Q,[(o(!0),l(S,null,B(g.hashtagsList,c=>(o(),l("div",{key:c.name,class:"boxes-list-item text-sub-color inline-flex items-center rounded-base px-base-2 py-2 border border-secondary-box-color dark:text-slate-400 dark:border-white/30"},[n(m,{to:{name:"search",params:{search_type:"hashtag",type:"post"},query:{q:c.name}},target:g.target,class:"font-bold text-xs me-2 text-inherit"},{default:b(()=>[x(p(c.name),1)]),_:2},1032,["to","target"]),i("button",{onClick:h=>a.unFollowHashtag(c.name)},[n(u,{name:"close",size:"16"})],8,R)]))),128))])):_("",!0)}const X=U(J,[["render",W]]),Y={components:{BaseIcon:k,Avatar:V},props:["usersList","target"],methods:{async unFollowUser(s){try{await A({id:s.id,action:"unfollow",name:s.name,avatar:s.avatar}),this.$emit("unfollow_user",s)}catch(e){this.showError(e.error)}}},emits:["unfollow_user"]},Z={key:0,class:"boxes-list flex flex-wrap gap-x-base-1 gap-y-base-2"};function $(s,e,g,y,t,a){const m=r("Avatar"),u=r("router-link"),c=r("BaseIcon");return g.usersList.length>0?(o(),l("div",Z,[(o(!0),l(S,null,B(g.usersList,h=>(o(),l("div",{key:h.id,class:"boxes-list-item inline-flex items-center p-1 border border-secondary-box-color rounded-base dark:text-slate-400 dark:border-white/30"},[n(m,{user:h,activePopover:!1,size:"1.5rem",target:g.target},null,8,["user","target"]),n(u,{to:{name:"profile",params:{user_name:h.user_name}},class:"text-xs text-inherit font-bold ms-base-1 me-2",target:g.target},{default:b(()=>[x(p(h.name),1)]),_:2},1032,["to","target"]),n(c,{name:"close",size:"16",onClick:v=>a.unFollowUser(h)},null,8,["onClick"])]))),128))])):_("",!0)}const I=U(Y,[["render",$]]);var w=null;const F=K(),ee={components:{BaseIcon:k,BaseButton:D,HashtagsList:G,Loading:N,Error:j,HashtagsBoxList:X,UsersList:q,UsersBoxList:I},computed:{...P(K,["user"])},data(){return{error:null,hashtagKeyword:"",UserKeyword:"",loading_suggest_hashtags:!0,followingHashtags:[],suggestHashtags:null,loading_suggest_users:!0,suggestUserLists:null,followingUsersList:[],currentStep:1}},mounted(){this.getSuggestHashtagsList(""),this.getSuggestUsersList(""),F.loginFirst()},methods:{findHashtag(){clearTimeout(w),w=setTimeout(()=>this.getSuggestHashtagsList(this.hashtagKeyword),400)},deleteHashtagSearch(){this.hashtagKeyword="",this.findHashtag()},findUser(){clearTimeout(w),w=setTimeout(()=>this.getSuggestUsersList(this.UserKeyword),400)},deleteUserSearch(){this.UserKeyword="",this.findUser()},async getSuggestHashtagsList(s){try{const e=await M(s);this.suggestHashtags=e,this.loading_suggest_hashtags=!1}catch(e){this.error=e,this.loading_suggest_hashtags=!1}},async getSuggestUsersList(s){try{const e=await O(s);this.suggestUserLists=e,this.loading_suggest_users=!1}catch{this.loading_suggest_users=!1}},removeFollowingHashtags(s){this.followingHashtags=this.followingHashtags.filter(e=>e.name!==s),this.suggestHashtags.map(e=>(e.name===s&&(e.is_followed=!1),e))},followHashtag(s){this.followingHashtags.push({name:s})},unFollowHashtag(s){this.followingHashtags=this.followingHashtags.filter(e=>e.name!==s)},removeFromFollowingUsers(s){this.followingUsersList=this.followingUsersList.filter(e=>e.id!==s.id),this.suggestUserLists.map(e=>(e.id===s.id&&(e.is_followed=!1),e))},followUser(s){this.followingUsersList.push({id:s.id,name:s.name,user_name:s.user_name,avatar:s.avatar})},unFollowUser(s){this.followingUsersList=this.followingUsersList.filter(e=>e.id!==s.id)},nextStep(){this.currentStep===2?(F.me(),this.$router.push({name:"home"})):this.currentStep++}}},se={class:"main-content-section bg-white border border-divider p-5 rounded-base-lg dark:bg-slate-800 dark:border-slate-800"},te={key:0},oe={class:"flex items-center justify-between mb-3"},ae={class:"text-main-color text-base-lg font-extrabold dark:text-white"},re={class:"mt-base-2 mb-3"},ne={class:"relative"},le=["placeholder"],ie={key:1},ge={key:0},ce={key:1},ue={class:"flex items-center justify-between mb-3"},he={class:"text-main-color text-base-lg font-extrabold dark:text-white"},de={class:"mt-base-2 mb-3"},_e={class:"relative"},pe=["placeholder"],me={class:"text-center mt-10"};function fe(s,e,g,y,t,a){const m=r("HashtagsBoxList"),u=r("BaseIcon"),c=r("Loading"),h=r("Error"),v=r("HashtagsList"),C=r("UsersBoxList"),E=r("UsersList"),T=r("BaseButton");return o(),l("div",se,[t.currentStep===1?(o(),l("div",te,[i("div",oe,[i("h3",ae,p(s.$t("Select Tags to Follow")),1)]),n(m,{hashtagsList:t.followingHashtags,target:"_blank",onUnfollow_signup_hashtag:a.removeFollowingHashtags},null,8,["hashtagsList","onUnfollow_signup_hashtag"]),i("div",re,[i("div",ne,[n(u,{name:"pencil",size:"16",class:"text-input-icon-color absolute top-3 start-2"}),L(i("input",{type:"text",onInput:e[0]||(e[0]=d=>a.findHashtag()),"onUpdate:modelValue":e[1]||(e[1]=d=>t.hashtagKeyword=d),placeholder:s.$t("Enter topics"),class:"w-full text-sm bg-input-background-color text-input-text-color border border-input-border-color rounded px-8 py-2 placeholder:text-input-placeholder-color outline-none appearance-none dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:placeholder:text-slate-300"},null,40,le),[[H,t.hashtagKeyword]]),t.hashtagKeyword!=""?(o(),l("button",{key:0,class:"absolute top-3 end-2",onClick:e[2]||(e[2]=d=>a.deleteHashtagSearch())},[n(u,{name:"close",size:"16",class:"text-input-icon-color"})])):_("",!0)])]),t.loading_suggest_hashtags?(o(),f(c,{key:0})):(o(),l("div",ie,[t.suggestHashtags.length>0?(o(),l("div",ge,[t.error?(o(),f(h,{key:0},{default:b(()=>[x(p(t.error),1)]),_:1})):_("",!0),n(v,{hashtagsList:t.suggestHashtags,target:"_blank",onFollow_hashtag:a.followHashtag,onUnfollow_hashtag:a.unFollowHashtag},null,8,["hashtagsList","onFollow_hashtag","onUnfollow_hashtag"])])):_("",!0)]))])):_("",!0),t.currentStep===2?(o(),l("div",ce,[i("div",ue,[i("h3",he,p(s.$t("Select Users to Follow")),1)]),n(C,{usersList:t.followingUsersList,target:"_blank",onUnfollow_user:a.removeFromFollowingUsers},null,8,["usersList","onUnfollow_user"]),i("div",de,[i("div",_e,[n(u,{name:"pencil",size:"16",class:"text-input-icon-color absolute top-3 start-2"}),L(i("input",{type:"text",onInput:e[3]||(e[3]=d=>a.findUser()),"onUpdate:modelValue":e[4]||(e[4]=d=>t.UserKeyword=d),placeholder:s.$t("Enter name"),class:"w-full text-sm bg-input-background-color text-input-text-color border border-input-border-color rounded px-8 py-2 placeholder:text-input-placeholder-color outline-none appearance-none dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:placeholder:text-slate-300"},null,40,pe),[[H,t.UserKeyword]]),t.UserKeyword!=""?(o(),l("button",{key:0,onClick:e[5]||(e[5]=d=>a.deleteUserSearch()),class:"absolute top-3 end-2"},[n(u,{name:"close",size:"16",class:"text-input-icon-color"})])):_("",!0)])]),t.loading_suggest_users?(o(),f(c,{key:0})):(o(),f(E,{key:1,usersList:t.suggestUserLists,target:"_blank",onFollow_user:a.followUser,onUnfollow_user:a.unFollowUser,showFollower:!0,showUserName:!1,showPopover:!1},null,8,["usersList","onFollow_user","onUnfollow_user"]))])):_("",!0),i("div",me,[n(T,{class:"font-bold",onClick:e[6]||(e[6]=d=>a.nextStep())},{default:b(()=>[x(p(s.$t("Continue")),1)]),_:1})])])}const xe=U(ee,[["render",fe]]);export{xe as default};
