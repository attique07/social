import{_ as z,O as C,y as N,B as U,H as L,a5 as P,ae as A,m as T,C as I,bW as D,s as M,r as m,o as a,c as r,F as f,a as l,t as i,b as n,g as E,x as _,e as h,v as R,w as O,u as k,aU as j,d as F,aV as G}from"../../assets/app-73d10358.js";import{B as H}from"./BaseCalendar-0db4a3ac.js";import{B as W}from"./BaseSelectLocation-e9b64171.js";import"./index.esm-4d5906a6.js";const Y={components:{Loading:C,BaseButton:N,BaseIcon:U,BaseInputText:L,BaseSelect:P,BaseTextarea:A,BaseCalendar:H,BaseSelectLocation:W},data(){return{loadingStatus:!0,about:null,avatar:null,bio:null,gender_id:null,genders:[],links:null,name:null,userName:null,timezone:null,timezones:[],birthday:null,error:{about:null,bio:null,gender_id:null,links:null,location:null,name:null,user_name:null,timezone:null,birthday:null},loadingSave:!1,pageName:null,pageUserName:null,location:{country_id:null,state_id:null,city_id:null,zip_code:null,address:null}}},computed:{...T(k,["user"])},mounted(){this.getProfileSettings()},methods:{...I(k,["storeProfileSettings","storeProfilePageSettings"]),async getProfileSettings(){if(this.user.is_page)this.pageName=this.user.name,this.pageUserName=this.user.user_name;else try{const e=await D();this.avatar=e.avatar,this.userName=e.name,this.name=e.name,this.bio=e.bio,this.about=e.about,this.links=e.links.split(" "),this.gender_id=e.gender_id.toString(),this.genders=window._.map(e.genders,function(s,d){return{key:s,value:d}}),this.timezone=e.timezone,this.timezones=window._.map(e.timezones,function(s,d){return{key:s,value:d}}),this.birthday=e.birthday,this.location.country_id=e.country_id,this.location.state_id=e.state_id,this.location.city_id=e.city_id,this.location.zip_code=e.zip_code,this.location.address=e.address,this.loadingStatus=!1}catch(e){console.log(e),this.loadingStatus=!1}},async saveProfileSettings(){if(!this.loadingSave){this.loadingSave=!0;try{this.user.is_page?await this.storeProfilePageSettings({name:this.pageName,user_name:this.pageUserName}):(await this.storeProfileSettings({name:this.name,bio:this.bio,about:this.about,links:this.links.filter(e=>e!="").join(" "),gender_id:this.gender_id==0?null:this.gender_id,timezone:this.timezone,birthday:this.formatDateTime(this.birthday),country_id:this.location.country_id,state_id:this.location.state_id,city_id:this.location.city_id,zip_code:this.location.zip_code,location:this.location.address}),this.userName=this.name,this.links.filter(e=>Object.keys(e).length!==0).length>0&&(this.links=this.links.filter(e=>Object.keys(e).length!==0))),this.showSuccess(this.$t("Your changes have been saved.")),this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loadingSave=!1}}},uploadAvatar(e){var s=e.target;if(s.files&&s.files[0]){var d=new FileReader;d.onload=g=>{const t=j(()=>G(()=>import("./UploadAvatarModal-4950a5fd.js"),["./UploadAvatarModal-4950a5fd.js","../../assets/app-73d10358.js","../../assets/app-7630eb5f.css","./style-0c8b0731.js","../../assets/style-790ea523.css"],import.meta.url));this.$dialog.open(t,{data:{imageData:g.target.result},props:{header:this.$t("Crop Avatar"),class:"crop-avatar-modal p-dialog-md",modal:!0},onClose:u=>{u.data&&(this.avatar=u.data.avatar),M()}})},d.readAsDataURL(s.files[0])}},onInputClick(e){e.target.value=null},addMoreLink(){this.error.links=null,this.links.push("")},removeMoreLink(e){this.links=this.links.filter((s,d)=>d!=e),this.links.length==0&&this.links.push("")}}},q={class:"flex flex-wrap gap-x-5 mb-3"},J={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},K={class:"md:flex-2 w-full"},Q={class:"flex flex-wrap gap-x-5 mb-3"},X={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},Z={class:"md:flex-2 w-full"},$={key:1},ee={class:"flex gap-x-2 md:gap-x-5 mb-3"},le={class:"md:flex-1 md:text-end mb-1"},te=["src"],se={class:"md:flex-2"},oe={class:"font-extrabold text-main-color dark:text-white"},ie={class:"flex flex-wrap gap-x-5 mb-3"},ne={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},ae={class:"md:flex-2 w-full"},re={class:"flex flex-wrap gap-x-5 mb-3"},de={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},ue={class:"md:flex-2 w-full"},me={class:"flex flex-wrap gap-x-5 mb-3"},ce={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},pe={class:"md:flex-2 w-full"},fe={class:"flex flex-wrap gap-x-5 mb-3"},he={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},_e={class:"md:flex-2 w-full"},ge={class:"flex flex-wrap gap-x-5 mb-3"},be={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},ve={class:"md:flex-2 w-full"},xe={key:0,class:"p-error"},ke={class:"flex flex-wrap gap-x-5 mb-3"},ye={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},we={class:"md:flex-2 w-full"},Ve={class:"flex flex-wrap gap-x-5 mb-3"},Be={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},Se={class:"md:flex-2 w-full"},ze={key:0,class:"p-error"},Ce={class:"flex flex-wrap gap-x-5 mb-3"},Ne={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},Ue={class:"md:flex-2 w-full"},Le=["onClick"],Pe={key:0,class:"block p-error mb-2"},Ae={class:"text-center mt-8"};function Te(e,s,d,g,t,u){const c=m("BaseInputText"),y=m("Loading"),b=m("BaseTextarea"),w=m("BaseSelectLocation"),v=m("BaseSelect"),V=m("BaseCalendar"),B=m("BaseIcon"),S=m("BaseButton");return a(),r(f,null,[e.user.is_page?(a(),r(f,{key:0},[l("div",q,[l("div",J,[l("label",null,i(e.$t("Page Name")),1)]),l("div",K,[n(c,{modelValue:t.pageName,"onUpdate:modelValue":s[0]||(s[0]=o=>t.pageName=o),error:t.error.name},null,8,["modelValue","error"])])]),l("div",Q,[l("div",X,[l("label",null,i(e.$t("Page Alias")),1)]),l("div",Z,[n(c,{modelValue:t.pageUserName,"onUpdate:modelValue":s[1]||(s[1]=o=>t.pageUserName=o),error:t.error.user_name},null,8,["modelValue","error"])])])],64)):(a(),r(f,{key:1},[t.loadingStatus?(a(),E(y,{key:0})):(a(),r("div",$,[l("div",ee,[l("div",le,[l("img",{class:"w-10 h-10 min-w-10 rounded-full md:ms-auto",src:t.avatar},null,8,te)]),l("div",se,[l("h5",oe,i(t.userName),1),l("button",{class:"text-xs font-bold text-primary-color dark:text-dark-primary-color",onClick:s[2]||(s[2]=o=>e.$refs.avatar.click())},i(e.$t("Change profile photo")),1),l("input",{type:"file",ref:"avatar",onChange:s[3]||(s[3]=o=>u.uploadAvatar(o)),onClick:s[4]||(s[4]=o=>u.onInputClick(o)),accept:"image/*",class:"hidden"},null,544)])]),l("div",ie,[l("div",ne,[l("label",null,i(e.$t("Display Name")),1)]),l("div",ae,[n(c,{modelValue:t.name,"onUpdate:modelValue":s[5]||(s[5]=o=>t.name=o),error:t.error.name},null,8,["modelValue","error"])])]),l("div",re,[l("div",de,[l("label",null,i(e.$t("Bio")),1)]),l("div",ue,[n(b,{modelValue:t.bio,"onUpdate:modelValue":s[6]||(s[6]=o=>t.bio=o),autoResize:!0,error:t.error.bio},null,8,["modelValue","error"])])]),l("div",me,[l("div",ce,[l("label",null,i(e.$t("About")),1)]),l("div",pe,[n(b,{modelValue:t.about,"onUpdate:modelValue":s[7]||(s[7]=o=>t.about=o),autoResize:!0,error:t.error.about},null,8,["modelValue","error"])])]),l("div",fe,[l("div",he,[l("label",null,i(e.$t("Location")),1)]),l("div",_e,[n(w,{modelValue:t.location,"onUpdate:modelValue":s[8]||(s[8]=o=>t.location=o),"show-label":!1},null,8,["modelValue"])])]),l("div",ge,[l("div",be,[l("label",null,i(e.$t("Gender")),1)]),l("div",ve,[n(v,{modelValue:t.gender_id,"onUpdate:modelValue":s[9]||(s[9]=o=>t.gender_id=o),options:[{key:e.$t("Prefer not to say"),value:"0"},...t.genders],optionLabel:"key",optionValue:"value",class:_({"p-invalid":t.error.gender_id})},null,8,["modelValue","options","class"]),t.error.gender_id?(a(),r("small",xe,i(t.error.gender_id),1)):h("",!0)])]),l("div",ke,[l("div",ye,[l("label",null,i(e.$t("Birthday")),1)]),l("div",we,[n(V,{modelValue:t.birthday,"onUpdate:modelValue":s[10]||(s[10]=o=>t.birthday=o),error:t.error.birthday},null,8,["modelValue","error"])])]),l("div",Ve,[l("div",Be,[l("label",null,i(e.$t("Timezone")),1)]),l("div",Se,[n(v,{modelValue:t.timezone,"onUpdate:modelValue":s[11]||(s[11]=o=>t.timezone=o),options:t.timezones,optionLabel:"key",optionValue:"value",class:_({"p-invalid":t.error.timezone})},null,8,["modelValue","options","class"]),t.error.timezone?(a(),r("small",ze,i(t.error.timezone),1)):h("",!0)])]),l("div",Ce,[l("div",Ne,[l("label",null,i(e.$t("Link")),1)]),l("div",Ue,[(a(!0),r(f,null,R(t.links,(o,p)=>(a(),r("div",{key:p,class:"mb-3 relative"},[n(c,{modelValue:t.links[p],"onUpdate:modelValue":x=>t.links[p]=x,class:_({"pe-8":t.links.length>1})},null,8,["modelValue","onUpdate:modelValue","class"]),t.links.length>1?(a(),r("button",{key:0,onClick:x=>u.removeMoreLink(p),class:"absolute top-2 end-1"},[n(B,{name:"close",class:"text-red-600"})],8,Le)):h("",!0)]))),128)),t.error.links?(a(),r("small",Pe,i(t.error.links),1)):h("",!0),l("button",{class:"block text-xs font-bold text-primary-color dark:text-dark-primary-color",onClick:s[12]||(s[12]=(...o)=>u.addMoreLink&&u.addMoreLink(...o))},i(e.$t("Add more link")),1)])])]))],64)),l("div",Ae,[n(S,{loading:t.loadingSave,onClick:s[13]||(s[13]=o=>u.saveProfileSettings())},{default:O(()=>[F(i(e.$t("Save")),1)]),_:1},8,["loading"])])],64)}const Re=z(Y,[["render",Te]]);export{Re as default};
