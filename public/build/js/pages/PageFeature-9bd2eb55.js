import{A as V,h as U,y as N,z as W,Z as z,B as R,m as x,l as E,u as M,k as F,C as j,D as $,_ as B,r as u,o as s,c as o,F as p,v as k,b as a,a as n,w as c,d as m,t as r,e as f,g as v,E as q,x as H}from"../../assets/app-73d10358.js";const I={components:{Avatar:V,UserName:U,BaseButton:N,VueperSlides:W,VueperSlide:z,BaseIcon:R},props:{pagesList:{type:Array,default:null},target:{type:String,default:""},showPopover:{type:Boolean,default:!0},listStyle:{type:String,default:"list"},positionWidget:{type:String,default:""}},data(){return{pagesListData:window._.clone(this.pagesList),slideRatio:0}},mounted(){this.setSlideRatio(),addEventListener("resize",()=>{this.setSlideRatio()})},computed:{...x(E,["isMobile"]),...x(M,["user","authenticated"]),...x(F,["userAction"])},watch:{userAction(){this.pagesList.map(e=>(e.id===this.userAction.pageId&&(this.userAction.status==="follow"?e.is_followed=!0:this.userAction.status==="unfollow"&&(e.is_followed=!1)),e))},pagesList(){this.pagesListData=window._.clone(this.pagesList)}},methods:{...j(F,["updateFollowStatus"]),async followPage(e){if(this.authenticated)try{await $({id:e.id,action:"follow"}),this.pagesListData.map(i=>(i.id===e.id&&(i.is_followed=!0),i)),this.updateFollowStatus({pageId:e.id,status:"follow"}),this.$emit("follow_page",e)}catch(i){this.showError(i.error)}else this.showRequireLogin()},async unFollowPage(e){try{await $({id:e.id,action:"unfollow"}),this.pagesListData.map(i=>(i.id===e.id&&(i.is_followed=!1),i)),this.updateFollowStatus({pageId:e.id,status:"unfollow"}),this.$emit("unfollow_page",e)}catch(i){this.showError(i.error)}},setSlideRatio(){this.listStyle!=="list"&&this.$nextTick(()=>{const e=this.pagesListData.map((i,l)=>{const w=this.$refs[`slideContent${l}`];return(w?w[0].offsetHeight:0)/(w[0].offsetWidth*(this.isMobile?1:2))});this.slideRatio=Math.max(...e)})}},emits:["follow_page","unfollow_page"]},T={key:0},Z={class:"flex-1 min-w-0"},G={key:0,class:"text-xs mb-1 truncate text-sub-color dark:text-slate-400"},J={key:1,class:"text-xs text-sub-color dark:text-slate-400"},K={key:0},O=["onClick"],Q=["onClick"],X={class:"rounded-lg border border-divider dark:border-white/10 h-full"},Y={class:"p-base-2"},ee={class:"flex gap-4"},te={class:"flex-1 min-w-0"},se={class:"flex flex-wrap gap-2 items-center mb-1"},oe={key:0,class:"text-xs mb-1 truncate text-sub-color dark:text-slate-400"},ie={key:1,class:"text-xs text-sub-color dark:text-slate-400"},le={key:0,class:"mt-base-2"},re={key:1,class:"h-base-9 mt-base-2"},ae={class:"flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full text-main-color dark:bg-slate-800 dark:text-white dark:shadow-slate-500 z-10"},ne={class:"flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full text-main-color dark:bg-slate-800 dark:text-white dark:shadow-slate-500 z-10"},de={key:1,class:"text-center"};function ce(e,i,l,w,d,b){const g=u("Avatar"),S=u("UserName"),y=u("router-link"),L=u("BaseButton"),C=u("VueperSlide"),P=u("BaseIcon"),A=u("VueperSlides");return d.pagesListData.length?(s(),o("div",{key:0,class:H(`user_pages_list_${l.positionWidget}`)},[l.listStyle==="list"?(s(),o("div",T,[(s(!0),o(p,null,k(d.pagesListData,t=>(s(),o("div",{key:t.id,class:"users-list-item flex items-center gap-base-2 mb-base-2"},[a(g,{user:t,target:l.target,activePopover:l.showPopover},null,8,["user","target","activePopover"]),n("div",Z,[a(S,{user:t,activePopover:l.showPopover,target:l.target,class:"list_items_title_text_color"},null,8,["user","activePopover","target"]),t.categories.length?(s(),o("div",G,[(s(!0),o(p,null,k(t.categories,(_,h)=>(s(),o("span",{key:_.id},[a(y,{to:{name:"user_pages",query:{category_id:_.id}},class:"text-inherit"},{default:c(()=>[m(r(_.name),1)]),_:2},1032,["to"]),m(" "+r(h===t.categories.length-1?"":" . "),1)]))),128))])):f("",!0),t.show_follower?(s(),o("div",J,r(e.$filters.numberShortener(t.follower_count,e.$t("[number] Follower"),e.$t("[number] Followers"))),1)):f("",!0)]),e.user.id!==t.id&&t.can_follow?(s(),o("div",K,[t.is_followed?(s(),o("button",{key:0,class:"list_items_button text-xs text-primary-color cursor-pointer font-bold dark:text-dark-primary-color",onClick:_=>b.unFollowPage(t)},r(e.$t("Unfollow")),9,O)):(s(),o("button",{key:1,class:"list_items_button text-xs text-primary-color cursor-pointer font-bold dark:text-dark-primary-color",onClick:_=>b.followPage(t)},r(e.$t("Follow")),9,Q))])):f("",!0)]))),128))])):(s(),v(A,{key:1,class:"no-shadow relative","slide-ratio":d.slideRatio,"visible-slides":e.isMobile?1:2,"slide-multiple":"",gap:1,autoplay:!0,duration:6e3,bullets:!1,touchable:!1,rtl:!!e.user.rtl},{"arrow-left":c(()=>[n("div",ae,[a(P,{name:"caret_left"})])]),"arrow-right":c(()=>[n("div",ne,[a(P,{name:"caret_right"})])]),default:c(()=>[(s(!0),o(p,null,k(d.pagesListData,(t,_)=>(s(),v(C,{key:t.id},{content:c(()=>[n("div",{ref_for:!0,ref:`slideContent${_}`},[n("div",X,[a(y,{to:{name:"profile",params:{user_name:t.user_name}},class:"block pb-[35%] bg-cover bg-center bg-no-repeat rounded-t-lg",style:q({backgroundImage:`url(${t.cover})`})},null,8,["to","style"]),n("div",Y,[n("div",ee,[a(g,{user:t,activePopover:!1,size:"3.25rem"},null,8,["user"]),n("div",te,[n("div",se,[a(S,{user:t},null,8,["user"])]),t.categories.length?(s(),o("div",oe,[(s(!0),o(p,null,k(t.categories,(h,D)=>(s(),o("span",{key:h.id},[a(y,{to:{name:"user_pages",query:{category_id:h.id}},class:"text-inherit"},{default:c(()=>[m(r(h.name),1)]),_:2},1032,["to"]),m(" "+r(D===t.categories.length-1?"":" . "),1)]))),128))])):f("",!0),t.show_follower?(s(),o("div",ie,r(e.$filters.numberShortener(t.follower_count,e.$t("[number] Follower"),e.$t("[number] Followers"))),1)):f("",!0)])]),t.can_follow?(s(),o("div",le,[t.is_followed?(s(),v(L,{key:0,onClick:h=>b.unFollowPage(t),type:"outlined",class:"w-full"},{default:c(()=>[m(r(e.$t("Unfollow")),1)]),_:2},1032,["onClick"])):(s(),v(L,{key:1,onClick:h=>b.followPage(t),type:"outlined",class:"w-full"},{default:c(()=>[m(r(e.$t("Follow")),1)]),_:2},1032,["onClick"]))])):(s(),o("div",re))])])],512)]),_:2},1024))),128))]),_:1},8,["slide-ratio","visible-slides","rtl"]))],2)):(s(),o("div",de,r(e.$t("No Pages")),1))}const ue=B(I,[["render",ce]]),_e={props:["data","params","position"],components:{UserPagesWidgetList:ue},data(){return{pagesList:this.data.data}}},he={key:0,class:"widget-box bg-white border border-white rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800"},fe={key:0,class:"widget-box-header flex flex-wrap items-center justify-between gap-2 mb-base-2"},me={class:"text-main-color text-base-lg font-extrabold dark:text-white"};function we(e,i,l,w,d,b){const g=u("UserPagesWidgetList");return d.pagesList.length?(s(),o("div",he,[l.data.enable_title?(s(),o("div",fe,[n("h3",me,r(l.data.title),1)])):f("",!0),a(g,{pagesList:d.pagesList,positionWidget:l.position,listStyle:["left","right"].includes(l.position)?"list":"slider"},null,8,["pagesList","positionWidget","listStyle"])])):f("",!0)}const ge=B(_e,[["render",we]]);export{ge as default};
