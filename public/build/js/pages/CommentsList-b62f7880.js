import{z as pe,Z as fe,aO as ge,m as R,u as S,_ as k,r as h,o as n,c as d,a as l,g as y,w as _,F as x,v as I,E as X,e as c,b as m,t as u,ap as be,at as N,aI as ye,aE as j,B as V,aP as oe,l as O,C as E,aH as ve,aK as _e,aF as ke,x as ie,I as D,h as A,d as w,a7 as q,aQ as we,aR as se,Q as ne,y as B,N as re,T as Ce,a8 as H,J as K,aN as M,O as Y,A as Q,aS as G,s as b,U as xe,aT as Le,aU as F,aV as z,aW as Re,aX as Ee,a3 as U,a2 as ae}from"../../assets/app-73d10358.js";const $e={components:{VueperSlides:pe,VueperSlide:fe,PhotoTheater:ge},props:["post"],data(){return{displayPhotosTheater:!1}},mounted(){var e=document.getElementById("postFeedSlider_"+this.post.id),t=e.getElementsByClassName("vueperslides__bullet");if(t.length>6)for(let s=0;s<t.length;s++)this.user.rtl?t[s].style.transform="translateX(-"+(t.length*14-84)/2+"px)":t[s].style.transform="translateX("+(t.length*14-84)/2+"px)"},computed:{...R(S,["user"])},methods:{clickPhotoImage(e){this.$refs.photoTheater.openPhotosTheater(e)},slideSlider(e){var t=document.getElementById("postFeedSlider_"+this.post.id),s=t.getElementsByClassName("vueperslides__bullet");if(s.length>6){var r=new DOMMatrixReadOnly(window.getComputedStyle(s[0]).transform).e+14,o=new DOMMatrixReadOnly(window.getComputedStyle(s[0]).transform).e-14;if(this.getBoundingClientRect_RelativeToParent(s[e]).left>70)for(let i=0;i<s.length;i++)s[i].style.transform="translateX("+o+"px)";else if(this.getBoundingClientRect_RelativeToParent(s[e]).left<14)for(let i=0;i<s.length;i++)s[i].style.transform="translateX("+r+"px)"}},getBoundingClientRect_RelativeToParent(e){const t=e.getBoundingClientRect(),s=e.parentElement.getBoundingClientRect();return new DOMRect(t.left-s.left,t.top-s.top,t.width,t.height)}}},Pe=["id"];function Se(e,t,s,r,o,i){const a=h("VueperSlide"),g=h("VueperSlides"),f=h("PhotoTheater");return n(),d(x,null,[l("div",{id:"postFeedSlider_"+s.post.id},[s.post.items?(n(),y(g,{key:0,ref:"photosFeed","slide-ratio":e.aspectRatioImage(s.post.items[0].subject.params),infinite:!1,arrows:!0,"disable-arrows-on-edges":"",rtl:!!e.user.rtl,touchable:!1,gap:5,onSlide:t[0]||(t[0]=v=>i.slideSlider(v.currentSlide.index)),class:"activity_content_photos_list no-shadow"},{"arrow-left":_(()=>t[1]||(t[1]=[l("div",{class:"arrow_slider arrow_slider_left"},null,-1)])),"arrow-right":_(()=>t[2]||(t[2]=[l("div",{class:"arrow_slider arrow_slider_right"},null,-1)])),default:_(()=>[(n(!0),d(x,null,I(s.post.items,(v,L)=>(n(),y(a,{key:v.id,class:"cursor-pointer bg-no-repeat",style:X({backgroundColor:`${v.subject.params.dominant_color?v.subject.params.dominant_color:"#000"}`}),image:v.subject.url,onClick:C=>i.clickPhotoImage(L)},null,8,["style","image","onClick"]))),128))]),_:1},8,["slide-ratio","rtl"])):c("",!0)],8,Pe),m(f,{ref:"photoTheater",photos:s.post.items},null,8,["photos"])],64)}const le=k($e,[["render",Se]]),Ie={props:["post"]},Te={key:0,class:"activity_content_thumb w-full"},je=["href"],Ve=["src"],Be={key:1,class:"fetched-link activity_content_info bg-primary-color p-base-2 text-white dark:bg-dark-primary-color"},Me={class:"font-bold block"},De=["href"],Ae={key:0,class:"truncate-3 mt-2"};function He(e,t,s,r,o,i){return n(!0),d(x,null,I(s.post.items,a=>{var g,f;return n(),d("div",{key:a.id,class:"activity_content share_link_activity_content",style:X({backgroundColor:`${a.subject.photo&&((g=a.subject.photo)!=null&&g.params.dominant_color)?(f=a.subject.photo)==null?void 0:f.params.dominant_color:"#000"}`})},[a.subject.photo?(n(),d("div",Te,[l("a",{href:a.subject.url,target:"_blank"},[l("img",{class:"activity-img max-h-[50vh] mx-auto",src:a.subject.photo.url},null,8,Ve)],8,je)])):c("",!0),a.subject.title?(n(),d("div",Be,[l("div",Me,[l("a",{href:a.subject.url,target:"_blank",class:"text-inherit break-word"},u(a.subject.title),9,De)]),a.subject.description?(n(),d("div",Ae,u(a.subject.description),1)):c("",!0)])):c("",!0)],4)}),128)}const de=k(Ie,[["render",He]]);var Ne=`
@layer primevue {
    .p-slider {
        position: relative;
    }

    .p-slider .p-slider-handle {
        cursor: grab;
        touch-action: none;
        display: block;
    }

    .p-slider-range {
        display: block;
    }

    .p-slider-horizontal .p-slider-range {
        top: 0;
        left: 0;
        height: 100%;
    }

    .p-slider-horizontal .p-slider-handle {
        top: 50%;
    }

    .p-slider-vertical {
        height: 100px;
    }

    .p-slider-vertical .p-slider-handle {
        left: 50%;
    }

    .p-slider-vertical .p-slider-range {
        bottom: 0;
        left: 0;
        width: 100%;
    }
}
`,Fe={handle:{position:"absolute"},range:{position:"absolute"}},ze={root:function(t){var s=t.props;return["p-slider p-component",{"p-disabled":s.disabled,"p-slider-horizontal":s.orientation==="horizontal","p-slider-vertical":s.orientation==="vertical"}]},range:"p-slider-range",handle:"p-slider-handle"},Ue=be.extend({name:"slider",css:Ne,classes:ze,inlineStyles:Fe}),Oe={name:"BaseSlider",extends:ye,props:{modelValue:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Ue,provide:function(){return{$parentInstance:this}}};function qe(e){return Ye(e)||Xe(e)||We(e)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function We(e,t){if(e){if(typeof e=="string")return W(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return W(e,t)}}function Xe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ye(e){if(Array.isArray(e))return W(e)}function W(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var me={name:"Slider",extends:Oe,emits:["update:modelValue","change","slideend"],dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var t=this.$el.getBoundingClientRect();this.initX=t.left+N.getWindowScrollLeft(),this.initY=t.top+N.getWindowScrollTop(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue:function(t){var s,r=t.touches?t.touches[0].pageX:t.pageX,o=t.touches?t.touches[0].pageY:t.pageY;this.orientation==="horizontal"?s=(r-this.initX)*100/this.barWidth:s=(this.initY+this.barHeight-o)*100/this.barHeight;var i=(this.max-this.min)*(s/100)+this.min;if(this.step){var a=this.range?this.value[this.handleIndex]:this.value,g=i-a;g<0?i=a+Math.ceil(i/this.step-a/this.step)*this.step:g>0&&(i=a+Math.floor(i/this.step-a/this.step)*this.step)}else i=Math.floor(i);this.updateModel(t,i)},updateModel:function(t,s){var r=parseFloat(s.toFixed(10)),o;this.range?(o=this.value?qe(this.value):[],this.handleIndex==0?(r<this.min?r=this.min:r>=this.max&&(r=this.max),o[0]=r):(r>this.max?r=this.max:r<=this.min&&(r=this.min),o[1]=r)):(r<this.min?r=this.min:r>this.max&&(r=this.max),o=r),this.$emit("update:modelValue",o),this.$emit("change",o)},onDragStart:function(t,s){this.disabled||(this.$el.setAttribute("data-p-sliding",!0),this.dragging=!0,this.updateDomData(),this.range&&this.value[0]===this.max?this.handleIndex=0:this.handleIndex=s,t.currentTarget.focus(),t.preventDefault())},onDrag:function(t){this.dragging&&(this.setValue(t),t.preventDefault())},onDragEnd:function(t){this.dragging&&(this.dragging=!1,this.$el.setAttribute("data-p-sliding",!1),this.$emit("slideend",{originalEvent:t,value:this.value}))},onBarClick:function(t){this.disabled||N.getAttribute(t.target,"data-pc-section")!=="handle"&&(this.updateDomData(),this.setValue(t))},onMouseDown:function(t,s){this.bindDragListeners(),this.onDragStart(t,s)},onKeyDown:function(t,s){switch(this.handleIndex=s,t.code){case"ArrowDown":case"ArrowLeft":this.decrementValue(t,s),t.preventDefault();break;case"ArrowUp":case"ArrowRight":this.incrementValue(t,s),t.preventDefault();break;case"PageDown":this.decrementValue(t,s,!0),t.preventDefault();break;case"PageUp":this.incrementValue(t,s,!0),t.preventDefault();break;case"Home":this.updateModel(t,this.min),t.preventDefault();break;case"End":this.updateModel(t,this.max),t.preventDefault();break}},decrementValue:function(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o;this.range?this.step?o=this.value[s]-this.step:o=this.value[s]-1:this.step?o=this.value-this.step:!this.step&&r?o=this.value-10:o=this.value-1,this.updateModel(t,o),t.preventDefault()},incrementValue:function(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o;this.range?this.step?o=this.value[s]+this.step:o=this.value[s]+1:this.step?o=this.value+this.step:!this.step&&r?o=this.value+10:o=this.value+1,this.updateModel(t,o),t.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{value:function(){var t;if(this.range){var s,r,o,i;return[(s=(r=this.modelValue)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:this.min,(o=(i=this.modelValue)===null||i===void 0?void 0:i[1])!==null&&o!==void 0?o:this.max]}return(t=this.modelValue)!==null&&t!==void 0?t:this.min},horizontal:function(){return this.orientation==="horizontal"},vertical:function(){return this.orientation==="vertical"},rangeStyle:function(){if(this.range){var t=this.rangeEndPosition>this.rangeStartPosition?this.rangeEndPosition-this.rangeStartPosition:this.rangeStartPosition-this.rangeEndPosition,s=this.rangeEndPosition>this.rangeStartPosition?this.rangeStartPosition:this.rangeEndPosition;return this.horizontal?{left:s+"%",width:t+"%"}:{bottom:s+"%",height:t+"%"}}else return this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:(this.value-this.min)*100/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]?(this.value[0]<this.min?0:this.value[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value.length===2?(this.value[1]>this.max?100:this.value[1]-this.min)*100/(this.max-this.min):100},rangeStartHandleStyle:function(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},Qe=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],Ge=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],Je=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"];function Ze(e,t,s,r,o,i){return n(),d("div",j({class:e.cx("root"),onClick:t[15]||(t[15]=function(){return i.onBarClick&&i.onBarClick.apply(i,arguments)})},e.ptm("root"),{"data-p-sliding":!1,"data-pc-name":"slider"}),[l("span",j({class:e.cx("range"),style:[e.sx("range"),i.rangeStyle]},e.ptm("range")),null,16),e.range?c("",!0):(n(),d("span",j({key:0,class:e.cx("handle"),style:[e.sx("handle"),i.handleStyle],onTouchstart:t[0]||(t[0]=function(a){return i.onDragStart(a)}),onTouchmove:t[1]||(t[1]=function(a){return i.onDrag(a)}),onTouchend:t[2]||(t[2]=function(a){return i.onDragEnd(a)}),onMousedown:t[3]||(t[3]=function(a){return i.onMouseDown(a)}),onKeydown:t[4]||(t[4]=function(a){return i.onKeyDown(a)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.modelValue,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("handle")),null,16,Qe)),e.range?(n(),d("span",j({key:1,class:e.cx("handle"),style:[e.sx("handle"),i.rangeStartHandleStyle],onTouchstart:t[5]||(t[5]=function(a){return i.onDragStart(a,0)}),onTouchmove:t[6]||(t[6]=function(a){return i.onDrag(a)}),onTouchend:t[7]||(t[7]=function(a){return i.onDragEnd(a)}),onMousedown:t[8]||(t[8]=function(a){return i.onMouseDown(a,0)}),onKeydown:t[9]||(t[9]=function(a){return i.onKeyDown(a,0)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.modelValue?e.modelValue[0]:null,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("startHandler")),null,16,Ge)):c("",!0),e.range?(n(),d("span",j({key:2,class:e.cx("handle"),style:[e.sx("handle"),i.rangeEndHandleStyle],onTouchstart:t[10]||(t[10]=function(a){return i.onDragStart(a,1)}),onTouchmove:t[11]||(t[11]=function(a){return i.onDrag(a)}),onTouchend:t[12]||(t[12]=function(a){return i.onDragEnd(a)}),onMousedown:t[13]||(t[13]=function(a){return i.onMouseDown(a,1)}),onKeydown:t[14]||(t[14]=function(a){return i.onKeyDown(a,1)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.modelValue?e.modelValue[1]:null,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("endHandler")),null,16,Je)):c("",!0)],16)}me.render=Ze;const et={props:{video:{type:Object,default:null},autoPlay:{type:Boolean,default:!1}},components:{BaseIcon:V,Slider:me},data(){return{play:!1,fullscreen:!1,showControl:!1,progressWidth:0,volume:0,videoKey:oe()}},mounted(){this.$refs.video.addEventListener("play",this.updatePlayButton),this.$refs.video.addEventListener("pause",this.updatePlayButton),this.$refs.video.addEventListener("loadedmetadata",this.initializeVideo),this.$refs.video.addEventListener("timeupdate",this.updateTimeElapsed),this.$refs.video.addEventListener("timeupdate",this.updateProgress),this.$refs.video.addEventListener("volumechange",this.updateVolumeIcon),this.$refs.video.addEventListener("click",this.togglePlay),this.$refs.seek.addEventListener("mousemove",this.updateSeekTooltip),this.$refs.seek.addEventListener("input",this.skipAhead),this.$refs.videoContainer.addEventListener("fullscreenchange",this.updateFullscreenButton),this.$refs.videoContainer.addEventListener("webkitfullscreenchange",this.updateFullscreenButton),this.$refs.videoContainer.addEventListener("mouseenter",this.showControls),this.$refs.videoContainer.addEventListener("mouseleave",this.hideControls),this.volume=this.volumeCurrentValue?this.volumeCurrentValue:this.volumeValue,this.$refs.video.volume=this.volume},watch:{volumeValue(){this.volume=this.volumeValue},volumeCurrentValue(){this.volume=this.volumeCurrentValue},volume(){this.$refs.video.volume=this.volume},dynamicDialogShown(e){e&&this.$refs.video.pause()}},computed:{...R(O,["muteVideo","volumeValue","volumeCurrentValue","dynamicDialogShown"]),...R(S,["user"])},methods:{...E(O,["setMuteVideo","setVolumeValue","setVolumeCurrentValue"]),togglePlay(){this.$refs.video.paused||this.$refs.video.ended?(document.querySelectorAll(".video_feed_activity_content video").forEach(e=>e.pause()),this.$refs.video.play()):this.$refs.video.pause()},playVideo(){document.querySelectorAll(".video_feed_activity_content video").forEach(e=>{e.id===this.$refs.video.id?e.play():e.pause()})},pauseVideo(){this.$refs.video.pause()},updatePlayButton(){var e;(e=this.$refs.video)!=null&&e.paused?this.play=!1:this.play=!0},formatTime(e){const t=new Date(e*1e3).toISOString().substr(11,8);return{minutes:t.substr(3,2),seconds:t.substr(6,2)}},initializeVideo(){if(!this.$refs.video)return;const e=Math.round(this.$refs.video.duration);this.$refs.seek.setAttribute("max",e),this.$refs.progressBar.setAttribute("max",e);const t=this.formatTime(e);this.$refs.duration.innerText=`${t.minutes}:${t.seconds}`,this.$refs.duration.setAttribute("datetime",`${t.minutes}m ${t.seconds}s`)},updateTimeElapsed(){if(this.$refs.video){const e=this.formatTime(Math.round(this.$refs.video.currentTime));this.$refs.timeElapsed.innerText=`${e.minutes}:${e.seconds}`,this.$refs.timeElapsed.setAttribute("datetime",`${e.minutes}m ${e.seconds}s`)}},updateProgress(){this.$refs.video&&(this.$refs.seek.value=Math.floor(this.$refs.video.currentTime),this.progressWidth=Math.floor(this.$refs.video.currentTime*100/this.$refs.video.duration))},updateSeekTooltip(e){const t=Math.round(e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"),10));this.$refs.seek.setAttribute("data-seek",t);const s=this.formatTime(t);this.$refs.seekTooltip.textContent=`${s.minutes}:${s.seconds}`;const r=this.$refs.video.getBoundingClientRect();this.$refs.seekTooltip.style.left=`${e.pageX-r.left}px`},skipAhead(e){const t=e.target.dataset.seek?e.target.dataset.seek:e.target.value;this.$refs.video.currentTime=t,this.$refs.progressBar.value=t,this.$refs.seek.value=t},updateVolume(){this.$refs.video.muted&&(this.$refs.video.muted=!1),this.setVolumeCurrentValue(this.volume),this.$refs.video.volume===0?this.setMuteVideo(!0):this.setMuteVideo(!1)},updateVolumeIcon(){this.muteVideo?(this.muteVideo||this.$refs.video.volume===0)&&this.setMuteVideo(!0):this.setMuteVideo(!1)},toggleMute(){this.setMuteVideo(!this.muteVideo),this.muteVideo?this.setVolumeValue(0):this.volumeCurrentValue?this.setVolumeValue(this.volumeCurrentValue):this.setVolumeValue(1)},toggleFullScreen(){if(document.fullscreenElement||document.webkitIsFullScreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e=this.$refs.videoContainer;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}this.user.video_auto_play&&setTimeout(()=>{this.playVideo()},100)},updateFullscreenButton(){document.fullscreenElement||document.webkitIsFullScreen?this.fullscreen=!0:this.fullscreen=!1},hideControls(){this.showControl=!1},showControls(){this.showControl=!0}}},tt={class:"flex flex-col justify-center",ref:"videoContainer"},st=["id","poster","autoplay","muted"],ot=["src"],it={class:"absolute left-0 bottom-0 right-0 bg-black-gradient z-10"},nt={class:"flex items-center justify-between rtl:flex-row-reverse text-white p-base-2"},rt={class:"flex items-center gap-4 rtl:flex-row-reverse"},at={class:"text-sm"},lt={ref:"timeElapsed"},dt={ref:"duration"},mt={class:"flex items-center gap-4 rtl:flex-row-reverse"},ut={class:"volume-controls relative leading-none"},ct={class:"volume-controls-slider"},ht={class:"video-progress bg-gray-300 flex rtl:flex-row-reverse"},pt={class:"seek",ref:"seek",value:"0",min:"0",type:"range",step:"1"},ft={class:"seek-tooltip",ref:"seekTooltip"},gt={key:0,class:"flex justify-center items-center w-12 h-12 bg-black-trans-6 text-white rounded-full"};function bt(e,t,s,r,o,i){const a=h("BaseIcon"),g=h("Slider");return n(),d("div",tt,[l("video",{class:"max-h-full",ref:"video",preload:"metadata",id:`videoMain-${s.video.file.id}-${o.videoKey}`,poster:s.video.thumb.url,autoplay:e.user.video_auto_play&&s.autoPlay,muted:o.volume===0,playsinline:""},[l("source",{src:s.video.file.url,type:"video/mp4"},null,8,ot)],8,st),m(ke,{name:"fade"},{default:_(()=>[ve(l("div",it,[l("div",nt,[l("div",rt,[l("button",{onClick:t[0]||(t[0]=(...f)=>i.togglePlay&&i.togglePlay(...f))},[o.play?(n(),y(a,{key:0,name:"pause_song"})):(n(),y(a,{key:1,name:"play_song"}))]),l("div",at,[l("time",lt,"00:00",512),t[5]||(t[5]=l("span",null," / ",-1)),l("time",dt,"00:00",512)])]),l("div",mt,[l("div",ut,[l("button",{onClick:t[1]||(t[1]=(...f)=>i.toggleMute&&i.toggleMute(...f))},[e.muteVideo?(n(),y(a,{key:0,name:"mute"})):(n(),y(a,{key:1,name:"unmute"}))]),l("div",ct,[m(g,{modelValue:o.volume,"onUpdate:modelValue":t[2]||(t[2]=f=>o.volume=f),step:.01,min:0,max:1,onChange:i.updateVolume,ref:"volume",orientation:"vertical"},null,8,["modelValue","onChange"])])]),l("button",{onClick:t[3]||(t[3]=(...f)=>i.toggleFullScreen&&i.toggleFullScreen(...f))},[o.fullscreen?(n(),y(a,{key:0,name:"fullscreen_exit"})):(n(),y(a,{key:1,name:"fullscreen"}))])])]),l("div",ht,[l("div",{class:"progress-bar",ref:"progressBar",style:X({width:`${o.progressWidth}%`})},t[6]||(t[6]=[l("div",{class:"progress-bar-dot"},null,-1)]),4),l("input",pt,null,512),l("div",ft,"00:00",512)])],512),[[_e,o.showControl]])]),_:1}),l("button",{class:"absolute inset-0 flex justify-center items-center outline-none w-full",onClick:t[4]||(t[4]=(...f)=>i.togglePlay&&i.togglePlay(...f))},[o.play?c("",!0):(n(),d("div",gt,[m(a,{name:"play_song",class:"leading-none"})]))])],512)}const yt=k(et,[["render",bt]]),vt={props:{post:{type:Object,default:null},autoPlay:{type:Boolean,default:!1}},data(){return{videoKey:oe()}},components:{VideoPlayer:yt},computed:{...R(S,["user"])},mounted(){if(this.user.video_auto_play&&this.autoPlay){const e=this;new IntersectionObserver(function(s){var r,o;s[0].isIntersecting?(r=e.$refs.videoRef[0])==null||r.playVideo():(o=e.$refs.videoRef[0])==null||o.pauseVideo()},{threshold:[.8]}).observe(document.getElementById(`videoContainer-${e.post.items[0].subject.file.id}-${this.videoKey}`))}}},_t={key:0,class:"activity_content_thumb w-full bg-black relative"};function kt(e,t,s,r,o,i){const a=h("VideoPlayer");return n(!0),d(x,null,I(s.post.items,g=>(n(),d("div",{key:g.id,class:"activity_content video_feed_activity_content"},[g.subject.thumb?(n(),d("div",_t,[m(a,{ref_for:!0,ref:"videoRef",video:g.subject,autoPlay:s.autoPlay,class:ie(["w-full",e.aspectRatioVideo(s.post.items[0].subject.thumb.params)=="horizontal"?"":"max-w-[16rem] mx-auto"]),id:`videoContainer-${g.subject.file.id}-${o.videoKey}`},null,8,["video","autoPlay","class","id"])])):c("",!0)]))),128)}const ue=k(vt,[["render",kt]]),wt={props:{post:{type:Object,default:null}},components:{BaseIcon:V}},Ct={class:"flex flex-wrap gap-base-2"},xt=["href","download"],Lt={class:"flex items-center gap-2"},Rt={class:"truncate"};function Et(e,t,s,r,o,i){const a=h("BaseIcon");return n(),d("div",Ct,[(n(!0),d(x,null,I(s.post.items,g=>(n(),d("a",{key:g.id,href:g.subject.url,download:g.subject.name,class:"bg-white text-inherit border border-divider px-base-2 py-2 rounded-1000 relative max-w-[200px] dark:bg-dark-web-wash dark:border-slate-700"},[l("div",Lt,[m(a,{name:"file"}),l("span",Rt,u(g.subject.name),1)])],8,xt))),128))])}const ce=k(wt,[["render",Et]]),$t={components:{ContentHtml:D,UserName:A},props:["post"],computed:{postTypeComponent(){switch(this.post.parent.type){case"photo":return le;case"link":return de;case"video":return ue;case"file":return ce}return null}}},Pt={class:"feed-share-content bg-primary-box-color rounded-base-lg p-base-2 dark:bg-dark-web-wash"},St={class:"feed-main-info"},It={class:"activity_feed_header flex mb-base-1"},Tt={class:"whitespace-normal"},jt={class:"activity_feed_content"},Vt={class:"activity_feed_content_item mt-base-2"};function Bt(e,t,s,r,o,i){const a=h("UserName"),g=h("router-link"),f=h("ContentHtml");return n(),d("div",Pt,[l("div",St,[l("div",It,[l("div",Tt,[m(a,{user:s.post.parent.user,truncate:!1},null,8,["user"]),w(" "+u(e.$t("on"))+" ",1),m(g,{to:{name:"post",params:{id:s.post.parent.id}},class:"text-inherit"},{default:_(()=>[w(u(s.post.parent.created_at),1)]),_:1},8,["to"])])]),l("div",jt,[m(f,{class:"activity_feed_content_message",content:s.post.parent.content,mentions:s.post.parent.mentions},null,8,["content","mentions"]),l("div",Vt,[i.postTypeComponent?(n(),y(q(i.postTypeComponent),{key:0,post:s.post.parent},null,8,["post"])):c("",!0)])])])])}const Mt=k($t,[["render",Bt]]),Dt={props:{post:{type:Object,default:null},autoPlay:{type:Boolean,default:!1}},computed:{postTypeComponent(){switch(this.post.type){case"photo":return le;case"link":return de;case"share":return Mt;case"video":return ue;case"file":return ce}return null}}};function At(e,t,s,r,o,i){return s.post.type==="video"?(n(),d(x,{key:0},[i.postTypeComponent?(n(),y(q(i.postTypeComponent),{key:0,post:s.post,autoPlay:s.autoPlay},null,8,["post","autoPlay"])):c("",!0)],64)):(n(),d(x,{key:1},[i.postTypeComponent?(n(),y(q(i.postTypeComponent),{key:0,post:s.post},null,8,["post"])):c("",!0)],64))}const Ht=k(Dt,[["render",At]]);function Nt(e,t,s){return window.axios.get(`/comment/get/${e}/${t}/${s}`).then(r=>r.data.data)}function Ft(e){return window.axios.post("comment/store",e).then(t=>t.data.data)}function zt(e){return window.axios.post("/comment/delete",e).then(t=>t.data.data)}function Ut(e,t){return window.axios.get(`/comment/get_reply/${e}/${t}`).then(s=>s.data.data)}function Ot(e){return window.axios.post("comment/store_reply",e).then(t=>t.data.data)}function qt(e){return window.axios.post("/comment/delete_reply",e).then(t=>t.data.data)}function Kt(e,t,s,r){return window.axios.get(`/comment/get_single/${e}/${t}/${s}/${r}`).then(o=>o.data.data)}function Wt(e){return window.axios.post("comment/store_edit",e).then(t=>t.data.data)}function Xt(e){return window.axios.post("comment/store_reply_edit",e).then(t=>t.data.data)}const P=we("comment",{state:()=>({commentsList:[],commentInfo:null}),actions:{doPushCommentsList({response:e,page:t}){t==1&&(this.commentsList=[]);let s=window._.map(e.items,function(r){return window._.extend({},r,{replies:[]})});this.commentsList=window._.concat(this.commentsList,s)},doAddComment(e){e=window._.extend({},e,{replies:[]}),this.commentsList.unshift(e)},doToggleLikeCommentItem(e){var t=null;this.commentInfo&&this.commentInfo.id===e.subject_id?t=this.commentInfo:t=window._.find(this.commentsList,{id:e.subject_id}),e.action==="add"?(t.is_liked=!0,t.like_count++):e.action==="remove"&&(t.is_liked=!1,t.like_count--)},doDeleteCommentItem(e){this.commentInfo&&this.commentInfo.id===e.id?this.commentInfo=null:this.commentsList=this.commentsList.filter(t=>t.id!==e.id)},doPushRepliesList({response:e,commentId:t,page:s}){let r=window._.find(this.commentsList,{id:t});this.commentInfo&&this.commentInfo.id===t&&(r=this.commentInfo),s==1&&(r.replies=[]),r.replies=window._.concat(r.replies,e.items)},hideRepliesList(e){let t=window._.find(this.commentsList,{id:e});this.commentInfo&&(t=this.commentInfo),t.replies=[]},doAddReply({response:e,commentId:t}){let s=window._.find(this.commentsList,{id:t});this.commentInfo&&this.commentInfo.id===t&&(s=this.commentInfo),s.reply_count++,s.replies.unshift(e)},doToggleLikeReplyItem({replyData:e,commentId:t}){if(this.commentInfo&&this.commentInfo.id===t){var s=this.commentInfo;s.replies.map(o=>(o.id===e.subject_id&&(e.action==="add"?(o.is_liked=!0,o.like_count++):e.action==="remove"&&(o.is_liked=!1,o.like_count--)),o)),s.reply.id===e.subject_id&&(e.action==="add"?(s.reply.is_liked=!0,s.reply.like_count++):e.action==="remove"&&(s.reply.is_liked=!1,s.reply.like_count--))}else if(this.commentsList.length>0){var r=window._.find(this.commentsList,{id:t});r.replies.map(o=>(o.id===e.subject_id&&(e.action==="add"?(o.is_liked=!0,o.like_count++):e.action==="remove"&&(o.is_liked=!1,o.like_count--)),o))}},doDeleteReplyItem({replyData:e,commentId:t}){let s=window._.find(this.commentsList,{id:t});this.commentInfo&&this.commentInfo.id===t&&(s=this.commentInfo,s.reply.id===e.id&&(s.reply=null)),s.reply_count--,s.replies=s.replies.filter(r=>r.id!==e.id)},doSetCommentSingle(e){e&&(this.commentInfo=window._.extend({},e.comment,{reply:null,replies:[]}),typeof e.reply>"u"&&(e.reply=[]),this.commentInfo.reply=e.reply)},resetCommentsData(){this.commentsList=[],this.commentInfo=null},doUpdateComment(e){let t=window._.find(this.commentsList,{id:e.id});this.commentInfo&&this.commentInfo.id===e.id&&(t=this.commentInfo),t.content=e.content,t.mentions=e.mentions,t.isEdited=!0},doUpdateReply({replyData:e,commentId:t}){if(this.commentInfo&&this.commentInfo.id===t){var s=this.commentInfo;s.replies.map(o=>(o.id===e.id&&(o.content=e.content,o.mentions=e.mentions,o.isEdited=!0),o)),s.reply.id===e.id&&(s.reply.content=e.content,s.reply.mentions=e.mentions,s.reply.isEdited=!0)}else if(this.commentsList.length>0){var r=window._.find(this.commentsList,{id:t});r.replies.map(o=>(o.id===e.id&&(o.content=e.content,o.mentions=e.mentions,o.isEdited=!0),o))}},async getCommentsListByItemId({itemType:e,itemId:t,page:s}){const r=await Nt(e,t,s);return this.doPushCommentsList({response:r,page:s}),r},async postComment(e){const t=await Ft(e);return this.doAddComment(t),t},async toggleLikeCommentItem(e){await se(e),this.doToggleLikeCommentItem(e)},async deleteComment(e){try{await zt(e),this.doDeleteCommentItem(e)}catch(t){console.log(t)}},async getRepliesByCommentId({commentId:e,page:t,reply_id:s}){const r=await Ut(e,t);return s&&(r.items=r.items.filter(o=>o.id!=s)),this.doPushRepliesList({response:r,commentId:e,page:t}),r},async postReply(e){const t=await Ot(e),s=e.comment_id;this.doAddReply({response:t,commentId:s})},async toggleLikeReplyItem(e){try{await se(e);const t=e.comment_id;this.doToggleLikeReplyItem({replyData:e,commentId:t})}catch(t){console.log(t)}},async deleteReply(e){try{await qt(e);const t=e.comment_id;this.doDeleteReplyItem({replyData:e,commentId:t})}catch(t){console.log(t)}},async getCommentSingleDetail({type:e,itemId:t,commentId:s,replyId:r}){const o=await Kt(e,t,s,r);this.doSetCommentSingle(o)},async editComment(e){const t=await Wt(e);this.doUpdateComment(t)},async editReply(e){const t=await Xt(e),s=e.comment_id;this.doUpdateReply({replyData:t,commentId:s})}},persist:!1}),Yt={components:{EmojiPicker:ne,BaseButton:B,Mentionable:re},inject:["dialogRef"],data(){return{id:this.dialogRef.data.id,content:Ce(this.dialogRef.data.content),loading:!1}},methods:{...E(H,["editPost"]),...E(P,["editComment","editReply"]),addEmoji(e){this.$refs.mention.addContent(e)},async editItem(){if(!this.loading){this.loading=!0;try{switch(this.dialogRef.data.type){case"posts":await this.editPost({id:this.id,content:this.content});break;case"comments":await this.editComment({id:this.id,content:this.content});break;case"comment_replies":await this.editReply({id:this.id,content:this.content,comment_id:this.dialogRef.data.comment_id});break}this.dialogRef.close(),this.showSuccess(this.$t("Edit Successfully."))}catch(e){e.error.code==K.RESPONSE_CODE_MEMBERSHIP_PERMISSION?this.showPermissionPopup("post",e.error.message):this.showError(e.error)}finally{this.loading=!1}}}}},Qt={class:"relative bg-input-background-color border border-border-input-border-color mb-base-2 pt-2 px-base-2 pb-8 dark:bg-slate-800 dark:border-white/10"},Gt={class:"absolute bottom-2 start-2 leading-none"},Jt={class:"text-end"};function Zt(e,t,s,r,o,i){const a=h("Mentionable"),g=h("EmojiPicker"),f=h("BaseButton");return n(),d(x,null,[l("div",Qt,[m(a,{modelValue:o.content,"onUpdate:modelValue":t[0]||(t[0]=v=>o.content=v),rows:4,ref:"mention",hasEventEnter:!1,autofocus:!0,className:"max-h-72"},null,8,["modelValue"]),l("div",Gt,[m(g,{onEmoji_click:i.addEmoji},null,8,["onEmoji_click"])])]),l("div",Jt,[m(f,{loading:o.loading,onClick:t[1]||(t[1]=v=>i.editItem())},{default:_(()=>[w(u(e.$t("Edit")),1)]),_:1},8,["loading"])])],64)}const J=k(Yt,[["render",Zt]]);function es(e,t,s){return window.axios.get(`history/get/${e}/${t}/${s}`).then(r=>r.data.data)}const ts={components:{Error:M,Loading:Y,BaseButton:B,ContentHtml:D,Avatar:Q,UserName:A},inject:{dialogRef:{default:null}},data(){return{type:this.dialogRef.data.type,itemId:this.dialogRef.data.id,error:null,loadmore_status:!1,loading_edit_histories:!0,editHistoriesList:[],page:1}},mounted(){this.getEditHistoriesList(this.type,this.itemId,this.page)},methods:{async getEditHistoriesList(e,t,s){try{const r=await es(e,t,s);s===1?this.editHistoriesList=r.items:this.editHistoriesList=window._.concat(this.editHistoriesList,r.items),r.has_next_page?(this.loadmore_status=!0,this.page++):this.loadmore_status=!1,this.loading_edit_histories=!1}catch(r){this.error=r,this.loading_edit_histories=!1}}}},ss={key:2},os={class:"flex-1 mx-base-2 min-w-0"},is={class:"text-xs text-sub-color dark:text-slate-400"},ns={key:3,class:"text-center mt-5"};function rs(e,t,s,r,o,i){const a=h("Error"),g=h("Loading"),f=h("Avatar"),v=h("UserName"),L=h("ContentHtml"),C=h("BaseButton");return n(),d(x,null,[o.error?(n(),y(a,{key:0},{default:_(()=>[w(u(o.error),1)]),_:1})):c("",!0),o.loading_edit_histories?(n(),y(g,{key:1})):(n(),d("div",ss,[(n(!0),d(x,null,I(o.editHistoriesList,p=>(n(),d("div",{key:p.id,class:"flex mb-base-2 pt-base-2 border-t border-divider dark:border-white/10 last:mb-0 first:border-none"},[m(f,{user:p.user,activePopover:!1},null,8,["user"]),l("div",os,[m(v,{user:p.user,activePopover:!1},null,8,["user"]),m(L,{content:p.content,mentions:p.mentions},null,8,["content","mentions"]),l("div",is,u(p.created_at),1)])]))),128))])),o.loadmore_status?(n(),d("div",ns,[m(C,{onClick:t[0]||(t[0]=p=>i.getEditHistoriesList(o.type,o.itemId,o.page))},{default:_(()=>[w(u(e.$t("View more")),1)]),_:1})])):c("",!0)],64)}const Z=k(ts,[["render",rs]]),as={data(){return{post:this.dialogRef.data.post}},inject:{dialogRef:{default:null}},methods:{...E(H,["deletePostItem","toggleEnableNotificationPostItem"]),reportPost(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(G,{data:{type:"posts",id:e},props:{header:this.$t("Report"),class:"post-report-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},deletePost(e){this.dialogRef.close(),setTimeout(()=>this.$confirm.require({message:this.$t("Are you sure you want to delete this post?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:()=>{this.deletePostItem({id:e}),b()},reject:()=>{b()},onHide:()=>{b()}}),300)},editPost(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(J,{data:{type:"posts",id:e.id,content:e.content},props:{header:this.$t("Edit"),class:"post-edit-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},viewEditHistory(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(Z,{data:{type:"posts",id:e},props:{header:this.$t("Edit History"),class:"edit-history-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},stopPostNotification(e){this.toggleEnableNotificationPostItem({subject_type:"posts",subject_id:e,action:"remove"}),this.dialogRef.close()},turnOnNotification(e){this.toggleEnableNotificationPostItem({subject_type:"posts",subject_id:e,action:"add"}),this.dialogRef.close()},cancel(){this.dialogRef.close()}}},ls={class:"options-menu-modal flex flex-col text-main-color dark:text-white outline-none",tabindex:"0",autofocus:""};function ds(e,t,s,r,o,i){return n(),d("div",ls,[l("button",{class:"options-menu-modal-text text-center p-4 text-red-600 font-bold",onClick:t[0]||(t[0]=a=>i.reportPost(o.post.id))},u(e.$t("Report")),1),o.post.canDelete?(n(),d("button",{key:0,class:"options-menu-modal-text options-menu-modal-border text-center p-4 border-t border-light-divider text-red-600 font-bold dark:border-white/10",onClick:t[1]||(t[1]=a=>i.deletePost(o.post.id))},u(e.$t("Delete Post")),1)):c("",!0),o.post.canEdit?(n(),d("button",{key:1,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[2]||(t[2]=a=>i.editPost(o.post))},u(e.$t("Edit Post")),1)):c("",!0),o.post.isEdited?(n(),d("button",{key:2,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[3]||(t[3]=a=>i.viewEditHistory(o.post.id))},u(e.$t("View Edit History")),1)):c("",!0),o.post.enable_notify?(n(),d("button",{key:4,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[5]||(t[5]=a=>i.stopPostNotification(o.post.id))},u(e.$t("Stop Notifications")),1)):(n(),d("button",{key:3,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[4]||(t[4]=a=>i.turnOnNotification(o.post.id))},u(e.$t("Turn on Notifications")),1)),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[6]||(t[6]=a=>i.cancel())},u(e.$t("Cancel")),1)])}const ms=k(as,[["render",ds]]),us={components:{Error:M,UsersList:xe,Loading:Y,BaseButton:B},inject:{dialogRef:{default:null}},data(){return{error:null,loadmore_status:!1,loading_users:!0,likersList:[],page:1}},mounted(){this.dialogRef.data.itemId&&this.getLikersList(this.dialogRef.data.itemType,this.dialogRef.data.itemId,this.page)},methods:{async getLikersList(e,t,s){try{const r=await Le(e,t,s);s===1?this.likersList=r.items:this.likersList=window._.concat(this.likersList,r.items),r.has_next_page?(this.loadmore_status=!0,this.page++):this.loadmore_status=!1,this.loading_users=!1}catch(r){this.error=r,this.loading_users=!1}}}},cs={key:3,class:"text-center"};function hs(e,t,s,r,o,i){const a=h("Error"),g=h("Loading"),f=h("UsersList"),v=h("BaseButton");return n(),d(x,null,[o.error?(n(),y(a,{key:0},{default:_(()=>[w(u(o.error),1)]),_:1})):c("",!0),o.loading_users?(n(),y(g,{key:1})):(n(),y(f,{key:2,usersList:o.likersList},null,8,["usersList"])),o.loadmore_status?(n(),d("div",cs,[m(v,{onClick:t[0]||(t[0]=L=>i.getLikersList(i.dialogRef.data.itemType,i.dialogRef.data.itemId,o.page))},{default:_(()=>[w(u(e.$t("View more")),1)]),_:1})])):c("",!0)],64)}const he=k(us,[["render",hs]]),ps={data(){return{subjectType:this.dialogRef.data.subjectType,subject:this.dialogRef.data.subject}},inject:{dialogRef:{default:null}},methods:{copyLink(e){navigator.clipboard.writeText(e),this.showSuccess(this.$t("This link copied!")),this.dialogRef.close()},shareToProfile(e){this.dialogRef.close();const t=F(()=>z(()=>import("./ShareToProfileModal-35d35d9f.js"),["./ShareToProfileModal-35d35d9f.js","../../assets/app-73d10358.js","../../assets/app-7630eb5f.css"],import.meta.url));setTimeout(()=>this.$dialog.open(t,{data:{subject:e},props:{header:this.$t("Share to your profile"),class:"share-modal p-dialog-lg",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}}),300)},shareToEmails(e,t){this.dialogRef.close();const s=F(()=>z(()=>import("./ShareToEmailsModal-c00b9b8a.js"),["./ShareToEmailsModal-c00b9b8a.js","../../assets/app-73d10358.js","../../assets/app-7630eb5f.css"],import.meta.url));setTimeout(()=>this.$dialog.open(s,{data:{type:e,subject:t},props:{header:this.$t("Share to email"),class:"share-modal p-dialog-md",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}}),300)},shareToSocialNetworks(e){this.dialogRef.close();const t=F(()=>z(()=>import("./ShareToSocialNetworksModal-96ee8a06.js"),["./ShareToSocialNetworksModal-96ee8a06.js","../../assets/app-73d10358.js","../../assets/app-7630eb5f.css"],import.meta.url));setTimeout(()=>this.$dialog.open(t,{data:{subject:e},props:{header:this.$t("Share to social networks"),class:"share-modal p-dialog-sm",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}}),300)},cancel(){this.dialogRef.close()}}},fs={class:"options-menu-modal flex flex-col text-main-color dark:text-white"};function gs(e,t,s,r,o,i){return n(),d("div",fs,[l("button",{class:"text-center p-4",onClick:t[0]||(t[0]=a=>i.copyLink(o.subject.href))},u(e.$t("Copy link")),1),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[1]||(t[1]=a=>i.shareToProfile(o.subject))},u(e.$t("Share to your profile")),1),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[2]||(t[2]=a=>i.shareToEmails(o.subjectType,o.subject))},u(e.$t("Mail")),1),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[3]||(t[3]=a=>i.shareToSocialNetworks(o.subject))},u(e.$t("Share to social networks")),1),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[4]||(t[4]=a=>i.cancel())},u(e.$t("Cancel")),1)])}const bs=k(ps,[["render",gs]]),ys={components:{ContentHtml:D,PostContentType:Ht,BaseIcon:V,Error:M,UserName:A,Avatar:Q,BaseButton:B},props:{post:{type:Object,default:null},showCommentAction:{type:Boolean,default:!0},showMenuAction:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!1}},computed:{...R(S,["authenticated","user"]),...R(O,["setDynamicDialogShown"])},methods:{...E(H,["toggleLikePostItem","toggleBookmarkPostItem"]),...E(Re,["setSelectedPage"]),async likePost(e){if(this.authenticated)try{await this.toggleLikePostItem({subject_type:"posts",subject_id:e,action:"add"})}catch(t){this.showError(t.error)}else this.showRequireLogin()},async unLikePost(e){try{await this.toggleLikePostItem({subject_type:"posts",subject_id:e,action:"remove"})}catch(t){this.showError(t.error)}},async bookmarkPost(e){if(this.authenticated)try{await this.toggleBookmarkPostItem({subject_type:"posts",subject_id:e,action:"add"})}catch(t){this.showError(t.error)}else this.showRequireLogin()},async unBookmarkPost(e){try{await this.toggleBookmarkPostItem({subject_type:"posts",subject_id:e,action:"remove"})}catch(t){this.showError(t.error)}},openLikersModal(e,t){this.$dialog.open(he,{data:{itemType:e,itemId:t},props:{header:this.$t("Likes"),class:"likers-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}})},openShareModal(e,t){this.authenticated?this.$dialog.open(bs,{data:{subjectType:e,subject:t},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b(),this.setDynamicDialogShown(!1)}}):this.showRequireLogin(),this.setDynamicDialogShown(!0)},openDropdownMenu(){this.$dialog.open(ms,{data:{post:this.post},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b(),this.setDynamicDialogShown(!1)}}),this.setDynamicDialogShown(!0)},commentClick(){this.authenticated?this.$emit("comment_click"):this.showRequireLogin()},boostPost(){this.user.id==this.post.user.id?this.$router.push({name:"advertising_boost_post",params:{id:this.post.id}}):(this.setSelectedPage(this.post.user),setTimeout(async()=>{try{await Ee(this.post.user.id);let e=this.$router.resolve({name:"advertising_boost_post",params:{id:this.post.id}});window.location.href=window.siteConfig.siteUrl+e.fullPath}catch(e){console.log(e),this.showError(e.error),this.setSelectedPage(null)}},1500))}},emits:["comment_click"]},vs={key:0},_s={class:"feed-item-header flex mb-base-2"},ks={class:"feed-item-header-img"},ws={class:"feed-item-header-info flex-grow ps-base-2"},Cs={class:"feed-item-header-info-title flex justify-between items-start gap-base-2"},xs={class:"whitespace-normal"},Ls={class:"feed-item-header-info-date flex gap-base-1 items-center w-max text-sub-color text-xs dark:text-slate-400"},Rs={key:0,class:"bg-web-wash text-main-color p-1 rounded-md dark:bg-dark-web-wash dark:text-slate-400"},Es={class:"feed-item-content"},$s={class:"activity_feed_content_item"},Ps={key:0,class:"feed-main-action mt-3 mb-2 dark:text-white"},Ss={class:"flex justify-between mb-base-2"},Is={class:"flex space-s-3"},Ts={class:"feed-comment-info-action-right flex gap-base-2"};function js(e,t,s,r,o,i){var ee,te;const a=h("Avatar"),g=h("UserName"),f=h("BaseIcon"),v=h("router-link"),L=h("ContentHtml"),C=h("PostContentType"),p=h("BaseButton"),T=h("Error");return s.post?(n(),d("div",vs,[l("div",_s,[l("div",ks,[m(a,{user:s.post.user},null,8,["user"])]),l("div",ws,[l("div",Cs,[l("div",xs,[m(g,{user:s.post.user,truncate:!1},null,8,["user"]),s.post.type==="user_page_review"?(n(),d(x,{key:0},[l("span",null,u(" "+((ee=s.post.items[0].subject)!=null&&ee.is_recommend?e.$t("recommended"):e.$t("doesn't recommend"))+" "),1),m(g,{user:(te=s.post.items[0].subject)==null?void 0:te.page,truncate:!1},null,8,["user"])],64)):c("",!0)]),s.showMenuAction&&e.authenticated?(n(),d("button",{key:0,onClick:t[0]||(t[0]=$=>i.openDropdownMenu()),class:"pt-[0.1rem]"},[m(f,{size:"20",name:"more_horiz_outlined",class:"feed-item-dropdown text-sub-color dark:text-slate-400"})])):c("",!0)]),l("div",Ls,[m(v,{to:{name:"post",params:{id:s.post.id}},class:"text-inherit"},{default:_(()=>[w(u(s.post.created_at),1)]),_:1},8,["to"]),s.post.is_ads?(n(),d("span",Rs,u(e.$t("Sponsored")),1)):c("",!0)])])]),l("div",Es,[m(L,{class:"activity_feed_content_message mb-base-2",content:s.post.content,mentions:s.post.mentions},null,8,["content","mentions"]),l("div",$s,[m(C,{post:s.post,"auto-play":s.autoPlay},null,8,["post","auto-play"])])]),s.showCommentAction?(n(),d("div",Ps,[l("div",Ss,[l("div",Is,[s.post.is_liked?(n(),d("button",{key:0,onClick:t[1]||(t[1]=$=>i.unLikePost(s.post.id))},[m(f,{name:"like_active",class:"feed-main-action-active text-base-red"})])):(n(),d("button",{key:1,onClick:t[2]||(t[2]=$=>i.likePost(s.post.id))},[m(f,{name:"like"})])),l("button",{onClick:t[3]||(t[3]=$=>i.commentClick())},[m(f,{name:"message"})]),l("button",{onClick:t[4]||(t[4]=$=>i.openShareModal("posts",s.post))},[m(f,{name:"share"})])]),l("div",Ts,[s.post.is_bookmarked?(n(),d("button",{key:0,onClick:t[5]||(t[5]=$=>i.unBookmarkPost(s.post.id))},[m(f,{name:"bookmark_active",class:"feed-main-action-bookmark-active text-primary-color dark:text-dark-primary-color"})])):(n(),d("button",{key:1,onClick:t[6]||(t[6]=$=>i.bookmarkPost(s.post.id))},[m(f,{name:"bookmarks",class:"dark:text-white"})])),s.post.canBoot?(n(),y(p,{key:2,onClick:i.boostPost,size:"sm"},{default:_(()=>[w(u(e.$t("Boost Post")),1)]),_:1},8,["onClick"])):c("",!0)])]),l("button",{class:"feed-item-like-text inline-block text-main-color font-semibold dark:text-white",onClick:t[7]||(t[7]=$=>i.openLikersModal("posts",s.post.id))},u(e.$filters.numberShortener(s.post.like_count,e.$t("[number] like"),e.$t("[number] likes"))),1)])):c("",!0)])):(n(),y(T,{key:1,class:"mb-0"},{default:_(()=>[w(u(e.$t("Post is not found")),1)]),_:1}))}const xo=k(ys,[["render",js]]),Vs={components:{Mentionable:re,EmojiPicker:ne},data(){return{content:""}},computed:{...R(S,["authenticated"])},methods:{addContent(e){this.$refs.mention.addContent(e)},postComment(){this.authenticated?this.content.trim()!=""&&(this.$emit("post_comment",this.content),this.setContent(""),this.content=""):this.showRequireLogin()},setContent(e){this.content=e,this.$refs.mention.setContent(e)}},emits:["post_comment"]},Bs={class:"flex justify-between gap-4"},Ms={class:"flex-1 text-base-none"},Ds=["disabled"];function As(e,t,s,r,o,i){const a=h("EmojiPicker"),g=h("Mentionable");return n(),d("div",Bs,[m(a,{onEmoji_click:i.addContent},null,8,["onEmoji_click"]),l("div",Ms,[m(g,{modelValue:o.content,"onUpdate:modelValue":t[0]||(t[0]=f=>o.content=f),placeholder:e.$t("Add comment"),rows:1,ref:"mention",onPress_enter:t[1]||(t[1]=f=>i.postComment()),className:"max-h-16"},null,8,["modelValue","placeholder"])]),l("div",null,[l("button",{disabled:!o.content,class:"feed-comment-info-comment-holder-btn text-primary-color font-bold text-xs uppercase disabled:opacity-50 dark:text-dark-primary-color",onClick:t[2]||(t[2]=f=>i.postComment())},u(e.$t("Post")),9,Ds)])])}const Hs=k(Vs,[["render",As]]),Ns={data(){return{comment:this.dialogRef.data.comment}},inject:["dialogRef"],methods:{...E(P,["deleteComment"]),reportCommentItem(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(G,{data:{type:"comments",id:e},props:{header:this.$t("Report"),class:"comment-report-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},deleteCommentItem(e){this.dialogRef.close(),setTimeout(()=>this.$confirm.require({message:this.$t("Are you sure you want to delete this comment?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:()=>{this.deleteComment({id:e}),b()},reject:()=>{b()},onHide:()=>{b()}}),300)},editComment(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(J,{data:{type:"comments",id:e.id,content:e.content},props:{header:this.$t("Edit"),class:"comment-edit-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},viewEditHistory(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(Z,{data:{type:"comments",id:e},props:{header:this.$t("Edit History"),class:"edit-history-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},cancel(){this.dialogRef.close()}}},Fs={class:"options-menu-modal flex flex-col text-main-color dark:text-white"};function zs(e,t,s,r,o,i){return n(),d("div",Fs,[l("button",{class:"options-menu-modal-text text-center p-4 text-red-600 font-bold",onClick:t[0]||(t[0]=a=>i.reportCommentItem(o.comment.id))},u(e.$t("Report")),1),o.comment.canDelete?(n(),d("button",{key:0,class:"options-menu-modal-text options-menu-modal-border text-center p-4 border-t border-light-divider text-red-600 font-bold dark:border-white/10",onClick:t[1]||(t[1]=a=>i.deleteCommentItem(o.comment.id))},u(e.$t("Delete Comment")),1)):c("",!0),o.comment.canEdit?(n(),d("button",{key:1,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[2]||(t[2]=a=>i.editComment(o.comment))},u(e.$t("Edit Comment")),1)):c("",!0),o.comment.isEdited?(n(),d("button",{key:2,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[3]||(t[3]=a=>i.viewEditHistory(o.comment.id))},u(e.$t("View Edit History")),1)):c("",!0),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[4]||(t[4]=a=>i.cancel())},u(e.$t("Cancel")),1)])}const Us=k(Ns,[["render",zs]]),Os={data(){return{comment:this.dialogRef.data.comment,reply:this.dialogRef.data.reply}},inject:["dialogRef"],methods:{...E(P,["deleteReply"]),reportReplyItem(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(G,{data:{type:"comment_replies",id:e},props:{header:this.$t("Report"),class:"reply-report-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},deleteReplyItem(e,t){this.dialogRef.close(),setTimeout(()=>this.$confirm.require({message:this.$t("Are you sure you want to delete this reply?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:()=>{this.deleteReply({comment_id:e,id:t}),b()},reject:()=>{b()},onHide:()=>{b()}}),300)},editReply(e,t){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(J,{data:{type:"comment_replies",id:t.id,content:t.content,comment_id:e},props:{header:this.$t("Edit"),class:"reply-edit-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},viewEditHistory(e){this.dialogRef.close(),setTimeout(()=>this.$dialog.open(Z,{data:{type:"comment_replies",id:e},props:{header:this.$t("Edit History"),class:"edit-history-modal",modal:!0,draggable:!1},onClose:()=>{b()}}),300)},cancel(){this.dialogRef.close()}}},qs={class:"options-menu-modal flex flex-col text-main-color dark:text-white"};function Ks(e,t,s,r,o,i){return n(),d("div",qs,[l("button",{class:"options-menu-modal-text text-center p-4 text-red-600 font-bold",onClick:t[0]||(t[0]=a=>i.reportReplyItem(o.reply.id))},u(e.$t("Report")),1),o.reply.canDelete?(n(),d("button",{key:0,class:"options-menu-modal-text options-menu-modal-border text-center p-4 border-t border-light-divider text-red-600 font-bold dark:border-white/10",onClick:t[1]||(t[1]=a=>i.deleteReplyItem(o.comment.id,o.reply.id))},u(e.$t("Delete Reply")),1)):c("",!0),o.reply.canEdit?(n(),d("button",{key:1,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[2]||(t[2]=a=>i.editReply(o.comment.id,o.reply))},u(e.$t("Edit Reply")),1)):c("",!0),o.reply.isEdited?(n(),d("button",{key:2,class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[3]||(t[3]=a=>i.viewEditHistory(o.reply.id))},u(e.$t("View Edit History")),1)):c("",!0),l("button",{class:"options-menu-modal-border options-menu-modal-sub-text text-center p-4 border-t border-light-divider dark:border-white/10",onClick:t[4]||(t[4]=a=>i.cancel())},u(e.$t("Cancel")),1)])}const Ws=k(Os,[["render",Ks]]),Xs={components:{Error:M,BaseIcon:V,ContentHtml:D,UserName:A,Avatar:Q},props:["comment","router_name","item","reply_id"],data(){return{error:null,page:1,replyIdData:this.reply_id,showRepliesBtn:!0}},computed:{...R(S,["user","authenticated"]),...R(P,["repliesList"])},methods:{...E(P,["getRepliesByCommentId","toggleLikeReplyItem","toggleLikeCommentItem","hideRepliesList"]),openLikersModal(e,t){this.$dialog.open(he,{data:{itemType:e,itemId:t},props:{header:this.$t("Likes"),class:"likers-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}})},openDropdownCommentMenu(e){this.$dialog.open(Us,{data:{comment:e},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}})},openDropdownReplyMenu(e,t){this.$dialog.open(Ws,{data:{comment:e,reply:t},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{b()}})},async loadReplies(e,t,s){try{(await this.getRepliesByCommentId({commentId:e,page:t,reply_id:s})).has_next_page?(this.page++,this.showRepliesBtn=!0):this.showRepliesBtn=!1}catch(r){this.error=r}},showReplies(e,t){this.replyIdData&&(this.replyIdData=this.reply_id),this.loadReplies(e,t,this.replyIdData)},hideReplies(e){this.hideRepliesList(e),this.page=1,this.showRepliesBtn=!0,this.replyIdData&&(this.replyIdData=null)},async likeComment(e){if(this.authenticated)try{await this.toggleLikeCommentItem({subject_type:"comments",subject_id:e,action:"add"})}catch(t){this.showError(t.error)}else this.showRequireLogin()},async unLikeComment(e){if(this.authenticated)try{await this.toggleLikeCommentItem({subject_type:"comments",subject_id:e,action:"remove"})}catch(t){this.showError(t.error)}else this.showRequireLogin()},replyComment(e,t=null){t?this.$emit("reply_comment",this.user.id!=t.user.id?K.MENTION+t.user.user_name+" ":"",e.id,t.user.name):this.$emit("reply_comment",this.user.id!=e.user.id?K.MENTION+e.user.user_name+" ":"",e.id,e.user.name)},likeReply(e,t){this.authenticated?this.toggleLikeReplyItem({comment_id:e,subject_type:"comment_replies",subject_id:t,action:"add"}):this.showRequireLogin()},unLikeReply(e,t){this.authenticated?this.toggleLikeReplyItem({comment_id:e,subject_type:"comment_replies",subject_id:t,action:"remove"}):this.showRequireLogin()}},emits:["reply_comment"]},Ys={class:"comment-item flex mb-base-2 group"},Qs={class:"flex-1 mx-base-2 min-w-0"},Gs={class:"comment-item-date flex flex-wrap items-center gap-base-1 text-xs text-sub-color mt-1 dark:text-slate-400 w-full"},Js={key:0},Zs={class:"pt-[0.2rem]"},eo={key:1,class:"replies-list ps-10 mt-base-1 ms-base-2"},to={key:0,class:"reply-item flex mb-base-2 group"},so={class:"flex-1 mx-base-2 truncate"},oo={class:"reply-item-date flex flex-wrap items-center gap-base-1 text-xs text-sub-color dark:text-slate-400"},io={class:"pt-[0.2rem]"},no={class:"flex-1 mx-base-2 truncate"},ro={class:"reply-item-date flex flex-wrap items-center gap-base-1 text-xs text-sub-color dark:text-slate-400"},ao=["onClick"],lo=["onClick"],mo=["onClick"],uo={class:"pt-[0.2rem]"},co=["onClick"],ho=["onClick"];function po(e,t,s,r,o,i){const a=h("Error"),g=h("Avatar"),f=h("UserName"),v=h("ContentHtml"),L=h("router-link"),C=h("BaseIcon");return n(),d(x,null,[o.error?(n(),y(a,{key:0},{default:_(()=>[w(u(o.error),1)]),_:1})):c("",!0),l("div",Ys,[m(g,{user:s.comment.user},null,8,["user"]),l("div",Qs,[m(f,{user:s.comment.user,class:"float-start me-1 comment-item-username"},null,8,["user"]),m(v,{content:s.comment.content,mentions:s.comment.mentions,class:"comment-item-content break-normal"},null,8,["content","mentions"]),l("div",Gs,[m(L,{to:{name:s.router_name,params:{id:s.item.id,comment_id:s.comment.id}},class:"text-sub-color dark:text-slate-400"},{default:_(()=>[w(u(s.comment.created_at)+" . ",1)]),_:1},8,["to"]),s.comment.like_count>0?(n(),d("button",{key:0,onClick:t[0]||(t[0]=p=>i.openLikersModal("comments",s.comment.id))},u(e.$filters.numberShortener(s.comment.like_count,e.$t("[number] like"),e.$t("[number] likes")))+" . ",1)):c("",!0),l("button",{onClick:t[1]||(t[1]=U(p=>i.replyComment(s.comment),["prevent"]))},u(e.$t("reply")),1),e.authenticated?(n(),d("button",{key:1,onClick:t[2]||(t[2]=p=>i.openDropdownCommentMenu(s.comment)),class:"invisible group-hover:visible"},[m(C,{name:"more_horiz_outlined",size:"16"})])):c("",!0)]),s.comment.reply_count>0?(n(),d("div",Js,[s.comment.reply_count-s.comment.replies.length-(o.replyIdData?1:0)>0&&o.showRepliesBtn?(n(),d("button",{key:0,class:"comment-item-view_all text-xs text-sub-color mt-1 dark:text-slate-400",onClick:t[3]||(t[3]=p=>i.showReplies(s.comment.id,o.page))},u(e.$filters.numberShortener(s.comment.reply_count-s.comment.replies.length-(o.replyIdData?1:0),e.$t("View reply ([number])"),e.$t("View replies ([number])"))),1)):(n(),d("button",{key:1,class:"comment-item-view_all text-xs text-sub-color mt-1 dark:text-slate-400",onClick:t[4]||(t[4]=p=>i.hideReplies(s.comment.id))},u(e.$t("Hide replies")),1))])):c("",!0)]),l("div",Zs,[s.comment.is_liked?(n(),d("button",{key:0,onClick:t[5]||(t[5]=p=>i.unLikeComment(s.comment.id))},[m(C,{name:"like_active",size:"16",class:"comment-item-icon-active text-base-red"})])):(n(),d("button",{key:1,onClick:t[6]||(t[6]=p=>i.likeComment(s.comment.id))},[m(C,{name:"like",size:"16",class:"comment-item-icon"})]))])]),s.comment.replies.length>0||this.replyIdData&&s.comment.reply?(n(),d("div",eo,[this.replyIdData&&s.comment.reply?(n(),d("div",to,[m(g,{user:s.comment.reply.user},null,8,["user"]),l("div",so,[m(f,{user:s.comment.reply.user,class:"float-start me-1 reply-item-username max-w-full"},null,8,["user"]),m(v,{content:s.comment.reply.content,mentions:s.comment.reply.mentions,class:"reply-item-content"},null,8,["content","mentions"]),l("div",oo,[m(L,{to:{name:s.router_name,params:{id:s.item.id,comment_id:s.comment.id,reply_id:s.comment.reply.id}},class:"text-sub-color dark:text-slate-400"},{default:_(()=>[w(u(s.comment.reply.created_at)+" . ",1)]),_:1},8,["to"]),s.comment.reply.like_count>0?(n(),d("button",{key:0,onClick:t[7]||(t[7]=p=>i.openLikersModal("comment_replies",s.comment.reply.id))},u(e.$filters.numberShortener(s.comment.reply.like_count,e.$t("[number] like"),e.$t("[number] likes")))+" . ",1)):c("",!0),l("button",{onClick:t[8]||(t[8]=U(p=>i.replyComment(s.comment,s.comment.reply),["prevent"]))},u(e.$t("reply")),1),e.authenticated?(n(),d("button",{key:1,onClick:t[9]||(t[9]=p=>i.openDropdownReplyMenu(s.comment,s.comment.reply)),class:"invisible group-hover:visible"},[m(C,{name:"more_horiz_outlined",size:"16"})])):c("",!0)])]),l("div",io,[s.comment.reply.is_liked?(n(),d("button",{key:0,onClick:t[10]||(t[10]=p=>i.unLikeReply(s.comment.id,s.comment.reply.id))},[m(C,{name:"like_active",size:"16",class:"reply-item-icon-active text-base-red"})])):(n(),d("button",{key:1,onClick:t[11]||(t[11]=p=>i.likeReply(s.comment.id,s.comment.reply.id))},[m(C,{name:"like",size:"16",class:"reply-item-icon"})]))])])):c("",!0),s.comment.replies.length>0?(n(),y(ae,{key:1,name:"fade"},{default:_(()=>[(n(!0),d(x,null,I(s.comment.replies,p=>(n(),d("div",{key:p.id,class:"reply-item flex mb-base-2 group"},[m(g,{user:p.user},null,8,["user"]),l("div",no,[m(f,{user:p.user,class:"float-start me-1 reply-item-username max-w-full"},null,8,["user"]),m(v,{content:p.content,mentions:p.mentions,class:"reply-item-content"},null,8,["content","mentions"]),l("div",ro,[m(L,{to:{name:s.router_name,params:{id:s.item.id,comment_id:s.comment.id,reply_id:p.id}},class:"text-sub-color dark:text-slate-400"},{default:_(()=>[w(u(p.created_at)+" . ",1)]),_:2},1032,["to"]),p.like_count>0?(n(),d("button",{key:0,onClick:T=>i.openLikersModal("comment_replies",p.id)},u(e.$filters.numberShortener(p.like_count,e.$t("[number] like"),e.$t("[number] likes")))+" . ",9,ao)):c("",!0),l("button",{onClick:U(T=>i.replyComment(s.comment,p),["prevent"])},u(e.$t("reply")),9,lo),e.authenticated?(n(),d("button",{key:1,onClick:T=>i.openDropdownReplyMenu(s.comment,p),class:"invisible group-hover:visible"},[m(C,{name:"more_horiz_outlined",size:"16"})],8,mo)):c("",!0)])]),l("div",uo,[p.is_liked?(n(),d("button",{key:0,onClick:T=>i.unLikeReply(s.comment.id,p.id)},[m(C,{name:"like_active",size:"16",class:"reply-item-icon-active text-base-red"})],8,co)):(n(),d("button",{key:1,onClick:T=>i.likeReply(s.comment.id,p.id)},[m(C,{name:"like",size:"16",class:"reply-item-icon"})],8,ho))])]))),128))]),_:1})):c("",!0)])):c("",!0)],64)}const fo=k(Xs,[["render",po]]),go={components:{Error:M,BaseButton:B,Loading:Y,CommentForm:Hs,CommentItem:fo,BaseIcon:V},props:["item","type","comment_id","reply_id","router_name"],data(){return{replyingUserName:null,error:null,loading_comment:!0,showLoadmore:!1,replyCommentId:null,commentSingle:null,page:1}},computed:{...R(S,["authenticated"]),...R(P,["commentsList","commentInfo"])},mounted(){this.loadComments(this.page);var e=typeof this.reply_id>"u"?"":this.reply_id;this.comment_id&&this.getCommentDetail({type:this.type,itemId:this.item.id,commentId:this.comment_id,replyId:e})},unmounted(){this.resetCommentsData()},methods:{...E(P,["getCommentsListByItemId","postComment","postReply","getCommentSingleDetail","resetCommentsData"]),...E(H,["addCommentToPost"]),async loadComments(e){try{(await this.getCommentsListByItemId({itemType:"posts",itemId:this.item.id,page:e})).has_next_page?(this.showLoadmore=!0,this.page++):this.showLoadmore=!1,this.loading_comment=!1}catch(t){this.error=t,this.loading_comment=!1}},async postNewComment(e){if(this.replyCommentId)try{await this.postReply({comment_id:this.replyCommentId,content:e})}catch(t){this.showError(t.error)}else try{await this.postComment({subject_type:this.type,subject_id:this.item.id,content:e,replies:[]}).then(t=>{this.addCommentToPost(t,this.item.id)})}catch(t){this.showError(t.error)}this.replyingUserName=null,this.focusForm()},replyComment(e,t,s){this.$refs.commentForm.setContent(e),this.replyCommentId=t,this.replyingUserName=s},focusForm(){this.$refs.commentForm.setContent(""),this.replyCommentId=null},cancelMention(){this.replyCommentId=null,this.replyingUserName=null},async getCommentDetail(e,t,s,r){try{await this.getCommentSingleDetail(e,t,s,r)}catch{this.$router.push({name:this.router_name,params:{id:this.item.id}})}}}},bo={key:2},yo={key:0,class:"comment_list border-t border-divider pt-3 my-3 dark:border-white/10 feed-comment-info-comment-holder-border"},vo={key:0,class:"border-t-4 border-b-4 border-divider pt-3 mb-base-2"},_o={key:1,class:"text-center my-5"},ko={key:0,class:"reply-status-item flex items-center justify-between bg-web-wash p-base-2 rounded-none absolute bottom-full left-0 right-0 w-full md:rounded-base dark:bg-dark-web-wash"};function wo(e,t,s,r,o,i){const a=h("Error"),g=h("Loading"),f=h("CommentItem"),v=h("BaseButton"),L=h("BaseIcon"),C=h("CommentForm");return n(),d(x,null,[o.error?(n(),y(a,{key:0},{default:_(()=>[w(u(o.error),1)]),_:1})):c("",!0),o.loading_comment?(n(),y(g,{key:1})):(n(),d("div",bo,[e.commentsList.length>0?(n(),d("div",yo,[e.commentInfo?(n(),d("div",vo,[m(f,{item:s.item,router_name:s.router_name,comment:e.commentInfo,onReply_comment:i.replyComment,reply_id:s.reply_id},null,8,["item","router_name","comment","onReply_comment","reply_id"])])):c("",!0),m(ae,{name:"fade"},{default:_(()=>[(n(!0),d(x,null,I(e.commentsList,p=>(n(),d("div",{key:p.id},[p.id!=s.comment_id?(n(),y(f,{key:0,item:s.item,comment:p,router_name:s.router_name,onReply_comment:i.replyComment},null,8,["item","comment","router_name","onReply_comment"])):c("",!0)]))),128))]),_:1}),o.showLoadmore?(n(),d("div",_o,[m(v,{size:"sm",onClick:t[0]||(t[0]=p=>i.loadComments(o.page))},{default:_(()=>[w(u(e.$t("View more")),1)]),_:1})])):c("",!0)])):c("",!0),l("div",{class:ie(["comment_form bg-white dark:bg-slate-800 border-t border-divider dark:border-white/10 feed-comment-info-comment-holder-border fixed left-0 right-0 lg:relative lg:bottom-0 z-10",e.authenticated?"bottom-[64px]":"bottom-0"])},[o.replyingUserName?(n(),d("div",ko,[w(u(e.$t("Replying to"))+" "+u(o.replyingUserName)+" ",1),m(L,{name:"close",size:"16",onClick:t[1]||(t[1]=p=>i.cancelMention()),class:"reply-status-item-icon"})])):c("",!0),m(C,{ref:"commentForm",onPost_comment:i.postNewComment,class:"p-base-2"},null,8,["onPost_comment"])],2)]))],64)}const Lo=k(go,[["render",wo]]);export{Hs as C,xo as P,Lo as a,Ht as b,P as u};
