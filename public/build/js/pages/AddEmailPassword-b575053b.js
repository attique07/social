import{_ as f,y as h,H as w,bI as y,bJ as _,r as c,o as g,c as v,a,t,b as r,w as u,d as p,F as b,u as x,ah as C,m as E,a3 as P}from"../../assets/app-73d10358.js";const $={components:{BaseButton:h,BaseInputText:w},data(){return{email:this.dialogRef.data.email,password:this.dialogRef.data.password,password_confirmed:this.dialogRef.data.password_confirmed,code:null,loading:!1,loading_resend:!1}},inject:["dialogRef"],methods:{async checkVerificationCode(){this.loading=!0;try{await y(this.email,this.password,this.password_confirmed,this.code),this.showSuccess(this.$t("Email and password have been successfully updated.")),this.dialogRef.close()}catch(e){this.showError(e.error)}finally{this.loading=!1}},async resendCode(){this.loading_resend=!0;try{await _(this.email,this.password,this.password_confirmed),this.showSuccess(this.$t("A verification code has been sent to your email account."))}catch(e){this.showError(e.error)}finally{this.loading_resend=!1}}}},k={class:"mb-base-2"},S={class:"mt-1"};function A(e,o,B,V,s,d){const m=c("BaseInputText"),n=c("BaseButton");return g(),v(b,null,[a("p",k,t(e.$t("Please check your email for a message with your code.")),1),r(m,{modelValue:s.code,"onUpdate:modelValue":o[0]||(o[0]=i=>s.code=i),placeholder:e.$t("Code")},null,8,["modelValue","placeholder"]),a("p",S,t(e.$t("We sent your code to"))+":Â "+t(s.email),1),r(n,{loading:s.loading,class:"w-full mt-3",onClick:o[1]||(o[1]=i=>d.checkVerificationCode())},{default:u(()=>[p(t(e.$t("Verify")),1)]),_:1},8,["loading"]),r(n,{loading:s.loading_resend,type:"transparent",class:"w-full mt-2",onClick:o[2]||(o[2]=i=>d.resendCode())},{default:u(()=>[p(t(e.$t("Resend code")),1)]),_:1},8,["loading"])],64)}const I=f($,[["render",A]]),R=x(),T={components:{BaseButton:h,BaseInputText:w,BasePassword:C},data(){return{loading:!1,email:null,password:null,password_confirmed:null,error:{email:null,password:null,password_confirmed:null}}},computed:{...E(x,["user"])},methods:{async saveAccount(){this.loading=!0;try{await _(this.email,this.password,this.password_confirmed),this.$dialog.open(I,{data:{email:this.email,password:this.password,password_confirmed:this.password_confirmed},props:{header:this.$t("Enter verification code"),class:"verification-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:async()=>{await R.me(),this.$router.push({name:"setting_account"})}}),this.loading=!1}catch(e){this.loading=!1,this.handleApiErrors(this.error,e)}}}},U={class:"flex flex-wrap gap-x-5 mb-3"},M={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},N={class:"md:flex-2 w-full"},F={class:"flex flex-wrap gap-x-5 mb-3"},j={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},D={class:"md:flex-2 w-full"},H={class:"flex flex-wrap gap-x-5 mb-3"},J={class:"md:flex-1 md:text-end w-full mb-1 pt-2"},W={class:"md:flex-2 w-full"},q={class:"text-center mt-8"};function z(e,o,B,V,s,d){const m=c("BaseInputText"),n=c("BasePassword"),i=c("BaseButton");return g(),v("form",{onSubmit:o[3]||(o[3]=P((...l)=>d.saveAccount&&d.saveAccount(...l),["prevent"]))},[a("div",U,[a("div",M,[a("label",null,t(e.$t("Email")),1)]),a("div",N,[r(m,{modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=l=>s.email=l),class:"w-full",error:s.error.email},null,8,["modelValue","error"])])]),a("div",F,[a("div",j,[a("label",null,t(e.$t("Password")),1)]),a("div",D,[r(n,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=l=>s.password=l),error:s.error.password},null,8,["modelValue","error"])])]),a("div",H,[a("div",J,[a("label",null,t(e.$t("Confirm Password")),1)]),a("div",W,[r(n,{modelValue:s.password_confirmed,"onUpdate:modelValue":o[2]||(o[2]=l=>s.password_confirmed=l),error:s.error.password_confirmed},null,8,["modelValue","error"])])]),a("div",q,[r(i,{loading:s.loading},{default:u(()=>[p(t(e.$t("Save")),1)]),_:1},8,["loading"])])],32)}const K=f(T,[["render",z]]);export{K as default};
