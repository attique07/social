import{_ as h,a5 as p,H as y,r as c,o,c as m,f as C,e as a,g as n,a as f,t as I}from"../../assets/app-73d10358.js";function L(){return window.axios.get("/country/get").then(e=>e.data.data)}function V(e){return window.axios.get(`/country/get_state/${e}`).then(t=>t.data.data)}function g(e){return window.axios.get(`/country/get_city/${e}`).then(t=>t.data.data)}const S={components:{BaseSelect:p,BaseInputText:y},props:{modelValue:{type:Object,default:null},showAddress:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0}},data(){var e,t,l,i,s;return{countriesList:[],statesList:[],citiesList:[],selectedCountryId:(e=this.modelValue)==null?void 0:e.country_id,selectedStateId:(t=this.modelValue)==null?void 0:t.state_id,selectedCityId:(l=this.modelValue)==null?void 0:l.city_id,zipCode:(i=this.modelValue)==null?void 0:i.zip_code,address:(s=this.modelValue)==null?void 0:s.address}},mounted(){this.getCountriesList(),this.selectedCountryId&&this.getStatesListByCountryId(this.selectedCountryId),this.selectedStateId&&this.getCitesListByStateId(this.selectedStateId)},computed:{locationInfo(){return{country_id:this.selectedCountryId,state_id:this.selectedStateId,city_id:this.selectedCityId,zip_code:this.zipCode,address:this.address,address_full:this.getFullAddress()}}},watch:{selectedCountryId(){this.getStatesListByCountryId(this.selectedCountryId).then(()=>{this.selectedStateId=null,this.selectedCityId=null}),this.$emit("update:modelValue",this.locationInfo)},selectedStateId(){this.selectedCityId=null,this.selectedStateId?this.getCitesListByStateId(this.selectedStateId):this.citiesList=[],this.$emit("update:modelValue",this.locationInfo)},selectedCityId(){this.selectedCityId&&this.$emit("update:modelValue",this.locationInfo)},zipCode(){this.$emit("update:modelValue",this.locationInfo)},address(){this.$emit("update:modelValue",this.locationInfo)}},methods:{async getCountriesList(){try{const e=await L();this.countriesList=[{id:0,name:this.$t("Country")},...e]}catch(e){console.log(e)}},async getStatesListByCountryId(e){if(this.statesList={id:0,name:this.$t("State")},e)try{const t=await V(e);this.statesList=[this.statesList,...t]}catch(t){console.log(t)}},async getCitesListByStateId(e){if(this.citiesList={id:0,name:this.$t("City")},e)try{const t=await g(e);this.citiesList=[this.citiesList,...t]}catch(t){console.log(t)}},getFullAddress(){var e,t,l;if(this.address_full=this.address?this.address:"",this.selectedCityId){let i=(e=window._.find(this.citiesList,{id:this.selectedCityId}))==null?void 0:e.name;i&&(this.address_full+=this.address_full?", "+i:i)}if(this.selectedStateId){let i=(t=window._.find(this.statesList,{id:this.selectedStateId}))==null?void 0:t.name;i&&(this.address_full+=this.address_full?", "+i:i)}if(this.zipCode&&(this.address_full+=this.address_full?", "+this.zipCode:this.zipCode),this.selectedCountryId){let i=(l=window._.find(this.countriesList,{id:this.selectedCountryId}))==null?void 0:l.name;i&&(this.address_full+=this.address_full?", "+i:i)}return this.address_full}},emits:["update:modelValue"]},B={class:"block mb-1"};function _(e,t,l,i,s,w){const r=c("BaseSelect"),u=c("BaseInputText");return o(),m("div",null,[s.countriesList.length>1&&l.showLabel?C(e.$slots,"default",{key:0},()=>[f("label",B,I(e.$t("Location")),1)]):a("",!0),s.countriesList.length>1?(o(),n(r,{key:1,class:"mb-base-2",modelValue:s.selectedCountryId,"onUpdate:modelValue":t[0]||(t[0]=d=>s.selectedCountryId=d),options:s.countriesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("Country")},null,8,["modelValue","options","placeholder"])):a("",!0),s.statesList.length>1?(o(),n(r,{key:2,class:"mb-base-2",modelValue:s.selectedStateId,"onUpdate:modelValue":t[1]||(t[1]=d=>s.selectedStateId=d),options:s.statesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("State")},null,8,["modelValue","options","placeholder"])):a("",!0),s.citiesList.length>1?(o(),n(r,{key:3,class:"mb-base-2",modelValue:s.selectedCityId,"onUpdate:modelValue":t[2]||(t[2]=d=>s.selectedCityId=d),options:s.citiesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("City")},null,8,["modelValue","options","placeholder"])):a("",!0),s.selectedCountryId?(o(),n(u,{key:4,class:"mb-base-2",modelValue:s.zipCode,"onUpdate:modelValue":t[3]||(t[3]=d=>s.zipCode=d),placeholder:e.$t("Zip Code")},null,8,["modelValue","placeholder"])):a("",!0),l.showAddress?(o(),n(u,{key:5,modelValue:s.address,"onUpdate:modelValue":t[4]||(t[4]=d=>s.address=d),placeholder:e.$t("Address")},null,8,["modelValue","placeholder"])):a("",!0)])}const k=h(S,[["render",_]]);export{k as B};
