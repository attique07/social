import{_ as w,y as B,B as x,m as b,l as k,u as I,r as h,o as a,c as r,a as s,t as c,b as l,w as p,d as _,F as g,v,e as D}from"../../assets/app-73d10358.js";import{B as F}from"./BaseInputFile-eaf97703.js";function C(){return window.axios.get("user_verify/get_files").then(e=>e.data.data)}function S(e){return window.axios.post("user_verify/upload_file",e).then(t=>t.data.data)}function $(e){return window.axios.post("user_verify/delete_file",e).then(t=>t.data.data)}function E(e){return window.axios.post("user_verify/store_request",e).then(t=>t.data.data)}const U={components:{BaseButton:B,BaseIcon:x,BaseInputFile:F},data(){return{myVerificationDocuments:[],uploadedVerificationDocuments:[]}},mounted(){this.config.userVerifyEnable&&!this.user.is_verify?this.getMyVerificationDocuments():this.$router.push({name:"home"})},computed:{...b(k,["config"]),...b(I,["user"])},methods:{async getMyVerificationDocuments(){try{const e=await C();this.myVerificationDocuments=e}catch(e){this.showError(e.error)}},async uploadVerificationDocuments(e){this.startUploadImages(e.target.files)},async startUploadImages(e,t){typeof t>"u"&&(t=!1);for(var o=0;o<e.length;o++)if(!(t&&e[o].type.indexOf("image")==-1)){var f=!0;if(t||(f=this.checkUploadedData(e[o],"user_verify")),f){let u=new FormData;var i=e[o];t&&(i=e[o].getAsFile()),u.append("file",i);try{const d=await S(u);this.uploadedVerificationDocuments.push(d)}catch(d){this.showError(d.error)}}}},async removeDocument(e){try{await $({id:e}),this.uploadedVerificationDocuments=this.uploadedVerificationDocuments.filter(t=>t.id!==e)}catch(t){this.showError(t.error)}},async storeDocuments(){try{await E({files:this.uploadedVerificationDocuments.map(e=>e.id)}),this.myVerificationDocuments=[...this.myVerificationDocuments,...this.uploadedVerificationDocuments],this.uploadedVerificationDocuments=[],this.showSuccess(this.$t("Your request has been submitted.")),this.$refs.baseInputFile.clearSelectedFile()}catch(e){this.showError(e.error)}}}},q={class:"main-content-section bg-white rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800"},N={class:"flex flex-wrap items-center justify-between gap-1 mb-base-2"},T={class:"text-main-color text-base-lg font-extrabold dark:text-white"},A={class:"mb-base-2"},M={key:0},j={class:"flex items-center gap-base-2 mb-base-2"},z=["href"],L={key:1},O={class:"flex items-center gap-base-2 mb-base-2"},R=["href"],Y=["onClick"],G={class:"flex gap-base-2"};function H(e,t,o,f,i,u){const d=h("BaseInputFile"),V=h("BaseIcon"),y=h("BaseButton");return a(),r("div",q,[s("div",N,[s("h3",T,c(e.$t("Request Identity Verification")),1)]),s("p",A,c(e.$t("The Verified badge lets people know that an account is authentic. To receive the verified badge, please submit the verification documents such as a driver's license, ID card, passport... if you're a business please submit company registration number. The information in the document must be matched to the information on your account. Information shared will only be used for verification purpose and will auto delete after the request is processed.")),1),s("div",null,[l(d,{ref:"baseInputFile",onUploadFile:u.uploadVerificationDocuments,multiple:"",accept:"*/*",class:"mb-2"},{default:p(()=>[_(c(e.$t("Upload Verification Documents")),1)]),_:1},8,["onUploadFile"]),i.myVerificationDocuments.length>0?(a(),r("div",M,[(a(!0),r(g,null,v(i.myVerificationDocuments,(n,m)=>(a(),r("div",{key:m},[s("div",j,[s("a",{href:n.file_url,target:"_blank"},c(n.name),9,z)])]))),128))])):D("",!0),i.uploadedVerificationDocuments.length>0?(a(),r("div",L,[(a(!0),r(g,null,v(i.uploadedVerificationDocuments,(n,m)=>(a(),r("div",{key:m},[s("div",O,[s("a",{href:n.file_url,target:"_blank"},c(n.name),9,R),s("button",{onClick:J=>u.removeDocument(n.id)},[l(V,{name:"close",class:"text-base-red",size:"20"})],8,Y)])]))),128))])):D("",!0)]),s("div",G,[l(y,{onClick:t[0]||(t[0]=n=>u.storeDocuments())},{default:p(()=>[_(c(e.$t("Submit")),1)]),_:1}),l(y,{type:"outlined",to:{name:"home"}},{default:p(()=>[_(c(e.$t("Cancel")),1)]),_:1})])])}const Q=w(U,[["render",H]]);export{Q as default};
