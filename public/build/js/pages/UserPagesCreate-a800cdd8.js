import{_ as f,y as C,H as w,ae as k,B,m as v,C as x,c7 as V,M as y,r as i,o as d,c,a as o,t as r,b as l,F as S,v as L,e as N,w as u,a3 as P,u as I,l as A,d as M}from"../../assets/app-73d10358.js";import{S as T}from"./SelectCategoriesModal-be6d07ad.js";import{s as E}from"./autocomplete.esm-ddce204a.js";import"./BaseCheckbox-e4290545.js";const U={components:{BaseButton:C,BaseInputText:w,BaseTextarea:k,AutoComplete:E,BaseIcon:B},data(){return{loadingCreate:!1,name:null,user_name:null,description:null,categories:[],hashtags:[],hashtagsList:[],error:{name:null,user_name:null,categories:null,description:null}}},computed:{...v(I,["user"])},mounted(){this.user.is_page&&this.setErrorLayout(!0)},methods:{...x(A,["setErrorLayout"]),async createNewPage(){this.loadingCreate=!0;try{const e=await V({name:this.name,user_name:this.user_name,description:this.description,categories:this.categories.map(s=>s.id),hashtags:this.hashtags.map(s=>s.name)});this.loadingCreate=!1,this.$router.push({name:"profile",params:{user_name:e.user_name}}),this.showSuccess(this.$t("Your page has been created.")),this.resetErrors(this.error)}catch(e){this.loadingCreate=!1,this.handleApiErrors(this.error,e)}},handleClickCategoriesInput(){this.$dialog.open(T,{data:{selectedCategoryIds:this.categories.map(e=>e.id)},props:{header:this.$t("Select Categories"),class:"select-categories-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:e=>{e.data&&(this.categories=e.data.selectedCategoriesList)}})},async suggestHashtagsList(e){try{const s=await y(e.query,1);this.hashtagsList=s}catch{this.hashtagsList=[]}},deleteSelectedCategories(e){this.categories=this.categories.filter(h=>h.id!==e.id);var s=e.childs;s&&s.length&&(this.categories=window._.differenceBy(this.categories,s,"id"))}}},H={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},F={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},j={class:"text-main-color text-base-lg font-extrabold dark:text-white"},q={class:"mb-2"},z={class:"block mb-1"},D={class:"mb-2"},Y={class:"block mb-1"},$={class:"mb-2"},G={class:"block mb-1"},J={class:"mb-2"},K={class:"block mb-1"},O={key:0,class:"flex flex-wrap gap-2 mt-base-2"},Q={class:"font-bold text-xs me-2"},R=["onClick"],W={class:"mb-2"},X={class:"block mb-1"};function Z(e,s,h,ee,t,n){const m=i("BaseInputText"),p=i("BaseTextarea"),g=i("BaseIcon"),b=i("AutoComplete"),_=i("BaseButton");return d(),c("div",H,[o("div",F,[o("h3",j,r(e.$t("Create New Page")),1)]),o("form",{onSubmit:s[5]||(s[5]=P((...a)=>n.createNewPage&&n.createNewPage(...a),["prevent"]))},[o("div",q,[o("label",z,r(e.$t("Page Name")),1),l(m,{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=a=>t.name=a),placeholder:e.$t("Please enter page name"),error:t.error.name},null,8,["modelValue","placeholder","error"])]),o("div",D,[o("label",Y,r(e.$t("Page Alias")),1),l(m,{modelValue:t.user_name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.user_name=a),placeholder:e.$t("Please enter page alias"),error:t.error.user_name},null,8,["modelValue","placeholder","error"])]),o("div",$,[o("label",G,r(e.$t("Description")),1),l(p,{modelValue:t.description,"onUpdate:modelValue":s[2]||(s[2]=a=>t.description=a),placeholder:e.$t("Enter page description"),error:t.error.description},null,8,["modelValue","placeholder","error"])]),o("div",J,[o("label",K,r(e.$t("Categories")),1),l(m,{placeholder:e.$t("Select categories"),onClick:s[3]||(s[3]=a=>n.handleClickCategoriesInput()),error:t.error.categories},null,8,["placeholder","error"]),t.categories.length>0?(d(),c("div",O,[(d(!0),c(S,null,L(t.categories,a=>(d(),c("div",{key:a.id,class:"text-sub-color inline-flex items-center rounded-base px-base-2 py-2 border border-secondary-box-color dark:text-slate-400 dark:border-white/30"},[o("span",Q,r(a.name),1),o("button",{onClick:se=>n.deleteSelectedCategories(a)},[l(g,{name:"close",size:"16"})],8,R)]))),128))])):N("",!0)]),o("div",W,[o("label",X,r(e.$t("Hashtags")),1),l(b,{modelValue:t.hashtags,"onUpdate:modelValue":s[4]||(s[4]=a=>t.hashtags=a),multiple:"",optionLabel:"name",suggestions:t.hashtagsList,onComplete:n.suggestHashtagsList,emptySearchMessage:e.$t("No hashtags found"),class:"w-full"},{option:u(a=>[o("div",null,r(a.option.name),1)]),_:1},8,["modelValue","suggestions","onComplete","emptySearchMessage"])]),l(_,{class:"w-full",loading:t.loadingCreate},{default:u(()=>[M(r(e.$t("Continue")),1)]),_:1},8,["loading"])],32)])}const le=f(U,[["render",Z]]);export{le as default};
