import{_,aN as y,O as m,Y as L,bG as f,r as o,o as a,c as n,g as h,w as i,d as q,t as d,e as k,F as w,b as c,a as b}from"../../assets/app-73d10358.js";import{U as D}from"./UserPagesList-4933c246.js";const N={components:{Error:y,Loading:m,UserPagesList:D,InfiniteLoading:L},props:["search_type","type","query"],data(){return{error:null,queryData:this.query,loadingPages:!0,searchPagesList:[],currentPage:1}},mounted(){this.getSearchPagesList(this.queryData,this.currentPage)},watch:{$route(){this.queryData=window._.isNil(this.$route.query.q)?"":this.$route.query.q,this.currentPage=1,this.queryData&&this.getSearchPagesList(this.queryData,this.currentPage)}},methods:{async getSearchPagesList(e,s){try{const t=await f(this.search_type,e,this.type,s);return this.currentPage===1?this.searchPagesList=t:this.searchPagesList=window._.concat(this.searchPagesList,t),this.loadingPages=!1,t}catch(t){this.error=t,this.loadingPages=!1}},loadMorePages(e){this.getSearchPagesList(this.queryData,++this.currentPage).then(s=>{s.length===0?e.complete():e.loaded()})}}},S={class:"bg-white p-base-2 rounded-none md:rounded-base-lg mb-base-2 dark:bg-slate-800"},x={key:0},I={key:1,class:"text-center"};function v(e,s,t,B,r,l){const u=o("Error"),g=o("Loading"),p=o("UserPagesList"),P=o("InfiniteLoading");return a(),n("div",S,[r.error?(a(),h(u,{key:0},{default:i(()=>[q(d(r.error),1)]),_:1})):k("",!0),r.loadingPages?(a(),h(g,{key:1})):(a(),n(w,{key:2},[r.searchPagesList.length>0?(a(),n("div",x,[c(p,{pagesList:r.searchPagesList},null,8,["pagesList"]),c(P,{onInfinite:l.loadMorePages},{spinner:i(()=>[c(g)]),complete:i(()=>s[0]||(s[0]=[b("span",null,null,-1)])),_:1},8,["onInfinite"])])):(a(),n("div",I,d(e.$t("No pages found")),1))],64))])}const V=_(N,[["render",v]]);export{V as default};
