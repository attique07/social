import{_ as p,y as h,C as f,u as g,J as i,r as l,o as u,c as A,b as c,a as _,w as m,d as w,t as B}from"../../assets/app-73d10358.js";import{f as C}from"./style-0c8b0731.js";const R={components:{Cropper:C,BaseButton:h},inject:{dialogRef:{default:null}},data(){return{image:this.dialogRef.data.imageData,loading:!1}},methods:{...f(g,["uploadAvatarPicture"]),async cropAvatar(){let{canvas:e}=this.$refs.cropper.getResult();if(e){const r=new FormData;var t;if(e.width>i.AVATAR_WIDTH){t=document.createElement("canvas");var n=t.getContext("2d");t.width=i.AVATAR_WIDTH,t.height=i.AVATAR_HEIGHT,n.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height)}else t=e;t.toBlob(async o=>{let s=new File([o],"Avatar.png",{type:"image/png"});if(r.append("file",s),!this.loading){this.loading=!0;try{await this.uploadAvatarPicture(r).then(a=>{this.dialogRef.close(a)})}catch(a){this.showError(a.error)}finally{this.loading=!1}}})}}}},v={class:"text-end mt-base-2"};function y(e,t,n,r,o,s){const a=l("cropper"),d=l("BaseButton");return u(),A("div",null,[c(a,{ref:"cropper","stencil-props":{aspectRatio:1/1},"min-width":200,src:o.image},null,8,["src"]),_("div",v,[c(d,{loading:o.loading,onClick:s.cropAvatar},{default:m(()=>[w(B(e.$t("Crop Avatar Image")),1)]),_:1},8,["loading","onClick"])])])}const V=p(R,[["render",y]]);export{V as default};
