import{_ as b,Q as _,y as f,N as g,C as w,a8 as E,J as j,r as a,o as r,c as i,a as o,t as h,b as s,w as k,d as P,F as v}from"../../assets/app-73d10358.js";import{P as C}from"./CommentsList-b62f7880.js";const S={components:{EmojiPicker:_,BaseButton:f,PostContent:C,Mentionable:g},inject:{dialogRef:{default:null}},data(){return{loading:!1,subject:this.dialogRef.data.subject,share_content:""}},mounted(){this.$refs.mention.addContent("")},methods:{...w(E,["postNewFeed"]),addEmoji(e){this.$refs.mention.addContent(e)},async shareToProfile(){this.loading=!0;try{await this.postNewFeed({type:"share",content:this.share_content,parent_id:this.subject.parent?this.subject.parent.id:this.subject.id}),this.dialogRef.close(),this.showSuccess(this.$t("Shared Successfully.")),this.loading=!1}catch(e){e.error.code==j.RESPONSE_CODE_MEMBERSHIP_PERMISSION?this.showPermissionPopup("post",e.error.message):this.showError(e.error),this.loading=!1}}}},y={class:"mb-base-2"},B={class:"relative bg-input-background-color text-input-text-color border border-input-border-color rounded-base-lg mb-base-2 pt-2 px-base-2 pb-8 dark:bg-slate-800 dark:text-white dark:border-white/10"},M={class:"absolute bottom-2 start-2 leading-none"},x={class:"bg-white border border-divider rounded-none md:rounded-base-lg p-base-2 mb-base-2 dark:bg-slate-800 dark:border-white/10"},N={key:0,class:"feed-entry-wrap"},R={key:1,class:"feed-entry-wrap"},V={class:"text-end"};function A(e,n,F,T,t,d){const u=a("Mentionable"),m=a("EmojiPicker"),l=a("PostContent"),p=a("BaseButton");return r(),i(v,null,[o("div",y,h(e.$t("Message")),1),o("div",B,[s(u,{modelValue:t.share_content,"onUpdate:modelValue":n[0]||(n[0]=c=>t.share_content=c),ref:"mention",rows:4,hasEventEnter:!1,className:"max-h-28"},null,8,["modelValue"]),o("div",M,[s(m,{onEmoji_click:d.addEmoji},null,8,["onEmoji_click"])])]),o("div",x,[t.subject.parent?(r(),i("div",N,[s(l,{post:t.subject.parent,showCommentAction:!1,showMenuAction:!1},null,8,["post"])])):(r(),i("div",R,[s(l,{post:t.subject,showCommentAction:!1,showMenuAction:!1},null,8,["post"])]))]),o("div",V,[s(p,{onClick:n[1]||(n[1]=c=>d.shareToProfile()),loading:t.loading},{default:k(()=>[P(h(e.$t("Share")),1)]),_:1},8,["loading"])])],64)}const D=b(S,[["render",A]]);export{D as default};
