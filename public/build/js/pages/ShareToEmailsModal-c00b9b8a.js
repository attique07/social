import{_ as m,y as u,H as p,ae as b,m as f,l as g,co as S,r as o,o as B,c as w,a as l,t as i,b as n,w as y,d as E,F as T}from"../../assets/app-73d10358.js";const _={components:{BaseButton:u,BaseInputText:p,BaseTextarea:b},inject:{dialogRef:{default:null}},data(){return{loadingShare:!1,token:null,emails:null,message:null,type:this.dialogRef.data.type,subject:this.dialogRef.data.subject,disableShare:!1}},mounted(){this.config.shareEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&(this.disableShare=!0,setTimeout(()=>{this.$recaptchaInstance.value.showBadge(),this.disableShare=!1},3e3))},unmounted(){this.config.shareEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&this.$recaptchaInstance.value.hideBadge()},computed:{...f(g,["config"])},methods:{async shareToEmail(){this.loadingShare=!0;try{this.config.shareEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&await this.$recaptcha("share").then(e=>{this.token=e}),await S({token:this.token,subject_type:this.type,subject_id:this.subject.id,emails:this.emails,message:this.message}),this.dialogRef.close(),this.showSuccess(this.$t("Shared Successfully.")),this.loadingShare=!1}catch(e){this.showError(e.error),this.loadingShare=!1}}}},V={class:"mb-base-2"},$={class:"mb-base-2"},k={class:"text-end"};function v(e,a,R,j,s,r){const c=o("BaseInputText"),d=o("BaseTextarea"),h=o("BaseButton");return B(),w(T,null,[l("div",V,i(e.$t("Email")),1),n(c,{modelValue:s.emails,"onUpdate:modelValue":a[0]||(a[0]=t=>s.emails=t),placeholder:e.$filters.numberShortener(e.config.shareEmailMax,e.$t("Add up to [number] email address, separated by commas"),e.$t("Add up to [number] email addresses, separated by commas")),class:"mb-5"},null,8,["modelValue","placeholder"]),l("div",$,i(e.$t("Message")),1),n(d,{rows:5,placeholder:e.$t("Message"),modelValue:s.message,"onUpdate:modelValue":a[1]||(a[1]=t=>s.message=t),class:"mb-base-2"},null,8,["placeholder","modelValue"]),l("div",k,[n(h,{onClick:a[2]||(a[2]=t=>r.shareToEmail()),loading:s.loadingShare,disabled:s.disableShare},{default:y(()=>[E(i(e.$t("Share")),1)]),_:1},8,["loading","disabled"])])],64)}const x=m(_,[["render",v]]);export{x as default};
