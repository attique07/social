import{_,o as n,c as o,a as d,B as k,y as v,r as u,b as m,t as h,w as x,d as I,O as w,H as C,b$ as E,c0 as $,g as y,F as g,v as f}from"../../assets/app-73d10358.js";const V={props:{modelValue:{type:String,default:"#fff"}},methods:{onInput(e){this.$emit("update:modelValue",e.target.value),this.$emit("change",e.target.value)}},emits:["update:modelValue","change"]},T={class:"base-color-picker"},L=["value"];function N(e,t,s,S,a,r){return n(),o("div",T,[d("input",{type:"color",value:s.modelValue,onInput:t[0]||(t[0]=i=>r.onInput(i))},null,40,L)])}const X=_(V,[["render",N]]),q={components:{BaseIcon:k,BaseButton:v},props:["song"],methods:{playSong(e){const t=document.getElementById("audio"+e);document.querySelectorAll("audio").forEach(s=>{s.pause(),s.currentTime=0}),t.play(),document.querySelectorAll(".playBtn").forEach(s=>s.style.display="block"),document.querySelectorAll(".pauseBtn").forEach(s=>s.style.display="none"),document.getElementById("play"+e).style.display="none",document.getElementById("pause"+e).style.display="block"},pauseSong(e){const t=document.getElementById("audio"+e);t.pause(),t.currentTime=0,document.getElementById("play"+e).style.display="block",document.getElementById("pause"+e).style.display="none"},selectSongItem(e){this.$emit("select_song_item",e)}},emits:["select_song_item"]},z={class:"flex gap-4 items-center justify-between mb-2 last:mb-0"},A={class:"flex gap-base-2 items-center justify-between w-full"},j={class:"flex gap-base-2 items-center"},F={class:"flex-1 truncate"},D=["src","id"];function H(e,t,s,S,a,r){const i=u("BaseIcon"),p=u("BaseButton");return n(),o("div",z,[d("span",A,[d("button",j,[m(i,{name:"pause_song",size:"20",id:"pause"+s.song.id,class:"pauseBtn bg-primary-color p-base-1 text-white rounded-full dark:bg-dark-primary-color",style:{display:"none"},onClick:t[0]||(t[0]=c=>r.pauseSong(s.song.id))},null,8,["id"]),m(i,{name:"play_song",size:"20",id:"play"+s.song.id,class:"playBtn bg-primary-color p-base-1 text-white rounded-full dark:bg-dark-primary-color",onClick:t[1]||(t[1]=c=>r.playSong(s.song.id))},null,8,["id"])]),d("div",F,h(s.song.name),1),m(p,{onClick:t[2]||(t[2]=c=>r.selectSongItem(s.song)),size:"sm"},{default:x(()=>[I(h(e.$t("Select")),1)]),_:1})]),d("audio",{src:s.song.file_url,loop:"",id:"audio"+s.song.id,class:"audio"},null,8,D)])}const O=_(q,[["render",H]]);var B=null;const P={components:{SongItem:O,Loading:w,BaseInputText:C},data(){return{defaultSongs:[],isSearching:!1,isLoadingSearch:!0,searchSongs:[],isShownSearchBox:!1,searchContent:""}},mounted(){this.getStoriesConfig()},methods:{async getStoriesConfig(){try{const e=await E();this.defaultSongs=e.songs}catch(e){this.showError(e.error)}},async getSongs(e){try{const t=await $(e);this.searchSongs=t,this.isLoadingSearch=!1}catch(t){this.showError(t.error),this.isLoadingSearch=!1}},onEnterSearch(){if(this.searchContent.trim()!=""){clearTimeout(B);var e=this;B=setTimeout(function(){e.searchContent.trim()!=""&&e.getSongs(e.searchContent)},600),this.isSearching=!0}else this.isSearching=!1},selectSong(e){this.$emit("select_song",e)}},emits:["select_song"]},U={class:"bg-white text-main-color rounded-base-lg p-base-2 dark:text-white dark:bg-slate-800"},G={key:0,class:"mt-base-2"},J={key:0,class:"max-h-32 overflow-auto pe-1 scrollbar-thin mt-base-2"},K={key:1,class:"text-center"},M={key:0,class:"max-h-32 overflow-auto pe-1 scrollbar-thin mt-base-2"},Q={key:1,class:"text-center mt-base-2"};function R(e,t,s,S,a,r){const i=u("BaseInputText"),p=u("Loading"),c=u("SongItem");return n(),o("div",U,[m(i,{placeholder:e.$t("Search Song"),left_icon:"search",modelValue:a.searchContent,"onUpdate:modelValue":t[0]||(t[0]=l=>a.searchContent=l),onInput:t[1]||(t[1]=l=>r.onEnterSearch()),autofocus:!0},null,8,["placeholder","modelValue"]),a.isSearching?(n(),o("div",G,[a.isLoadingSearch?(n(),y(p,{key:0})):(n(),o(g,{key:1},[a.searchSongs.length>0?(n(),o("div",J,[(n(!0),o(g,null,f(a.searchSongs,l=>(n(),y(c,{key:l.id,song:l,onSelect_song_item:b=>r.selectSong(l)},null,8,["song","onSelect_song_item"]))),128))])):(n(),o("div",K,h(e.$t("No songs found")),1))],64))])):(n(),o(g,{key:1},[a.defaultSongs.length>0?(n(),o("div",M,[(n(!0),o(g,null,f(a.defaultSongs,l=>(n(),y(c,{key:l.id,song:l,onSelect_song_item:b=>r.selectSong(l)},null,8,["song","onSelect_song_item"]))),128))])):(n(),o("div",Q,h(e.$t("No Songs")),1))],64))])}const Y=_(P,[["render",R]]);export{X as B,Y as S};
