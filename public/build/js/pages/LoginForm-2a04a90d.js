import{y as v,ah as k,H as x,m as L,l as C,u as V,_ as P,r as d,o as r,c as n,a as i,t as a,b as l,ai as m,w as p,d as u,F as f,v as E,e as w}from"../../assets/app-73d10358.js";const K={components:{BaseButton:v,BasePassword:k,BaseInputText:x},data(){return{user:{email:null,password:null},loadingLogin:!1,disableLogin:!1,error:{email:null,password:null}}},mounted(){this.config.loginEnableRecapcha&&window.siteConfig.recapchaPublicKey&&(this.disableLogin=!0,setTimeout(()=>{this.$recaptchaInstance.value.showBadge(),this.disableLogin=!1},3e3))},unmounted(){this.config.loginEnableRecapcha&&window.siteConfig.recapchaPublicKey&&this.$recaptchaInstance.value.hideBadge()},computed:{...L(C,["config"])},methods:{async login(){if(!this.loadingLogin){this.loadingLogin=!0;try{this.config.loginEnableRecapcha&&window.siteConfig.recapchaPublicKey&&await this.$recaptcha("login").then(c=>{this.user.token=c}),await V().login(this.user);var e=window.siteConfig.siteUrl;if(this.$route.query.redirect){var s=atob(this.$route.query.redirect);s.search(window.siteConfig.siteUrl)!==-1&&(e=s)}window.location.href=e,this.resetErrors(this.error)}catch(c){this.handleApiErrors(this.error,c)}finally{this.loadingLogin=!1}}}}},S={class:"widget-box bg-white rounded-base max-w-full w-full sm:w-96 p-7 mx-auto mb-base-2 dark:bg-slate-800"},$={class:"text-base-lg font-extrabold mb-5 dark:text-white"},T={class:"my-5 text-center"},F={class:"flex flex-wrap gap-3 justify-center mb-5"},N=["href"],U=["src","alt"],A={class:"mt-5 text-center"},I={key:1,class:"mt-5 text-center"};function R(e,s,c,q,o,h){const b=d("BaseInputText"),y=d("BasePassword"),_=d("BaseButton"),g=d("router-link");return r(),n("div",S,[i("h3",$,a(e.$t("Login")),1),l(b,{modelValue:o.user.email,"onUpdate:modelValue":s[0]||(s[0]=t=>o.user.email=t),placeholder:e.$t("Email"),error:o.error.email,left_icon:"invite",onKeyup:m(h.login,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),l(y,{modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=t=>o.user.password=t),placeholder:e.$t("Password"),autocomplete:"current-password",error:o.error.password,onKeyup:m(h.login,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),l(_,{onClick:h.login,loading:o.loadingLogin,disabled:o.disableLogin,class:"w-full"},{default:p(()=>[u(a(e.$t("Login")),1)]),_:1},8,["onClick","loading","disabled"]),e.config.openidProviders.length>0?(r(),n(f,{key:0},[i("div",T,a(e.$t("Or Sign in using")),1),i("div",F,[(r(!0),n(f,null,E(e.config.openidProviders,(t,B)=>(r(),n("a",{key:B,href:t.href},[i("img",{class:"max-w-[2rem]",src:t.photo,alt:t.name},null,8,U)],8,N))),128))])],64)):w("",!0),i("div",A,[l(g,{to:{name:"recover"},class:"text-primary-color dark:text-dark-primary-color"},{default:p(()=>[u(a(e.$t("Forgot password")),1)]),_:1})]),this.config.signupEnable?(r(),n("div",I,[u(a(e.$t("Don't have an account?"))+"Â ",1),l(g,{to:{name:"signup"},class:"text-primary-color dark:text-dark-primary-color"},{default:p(()=>[u(a(e.$t("Sign up")),1)]),_:1})])):w("",!0)])}const j=P(K,[["render",R]]);export{j as default};
