import{B as v,H as g,ae as y,y as w,m as p,u as B,l as _,_ as k,r,o as C,c as E,a as s,t,b as n,w as c,d,a3 as I}from"../../assets/app-73d10358.js";import{i as $,a as S}from"./invite-c8df5c48.js";import{B as F}from"./BaseInputFile-eaf97703.js";const L={components:{BaseIcon:v,BaseInputText:g,BaseTextarea:y,BaseButton:w,BaseInputFile:F},data(){return{emails:null,message:null,csv_file:null,token:null,emailLoading:!1,disableEmail:!1,csvLoading:!1,disableCsv:!1}},mounted(){this.config.inviteEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&(this.disableEmail=!0,this.disableCsv=!0,setTimeout(()=>{this.$recaptchaInstance.value.showBadge(),this.disableEmail=!1,this.disableCsv=!1},3e3))},unmounted(){this.config.inviteEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&this.$recaptchaInstance.value.hideBadge()},computed:{...p(B,["user"]),...p(_,["config"])},methods:{copyURL(){let e=document.querySelector("#myUrl");e.setAttribute("type","text"),e.select(),document.execCommand("copy"),this.showSuccess(this.$t("This link copied!"))},async inviteEmails(){if(!this.emailLoading)try{this.emailLoading=!0,this.config.inviteEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&await this.$recaptcha("invite").then(e=>{this.token=e}),await $({token:this.token,emails:this.emails,message:this.message}),this.emails=null,this.message=null,this.showSuccess(this.$t("Your invitation has been sent."))}catch(e){this.showError(e.error)}finally{this.emailLoading=!1}},selectFile(e){this.csv_file=e.target.files[0]},async inviteCsvFile(){if(!this.csvLoading)try{this.csvLoading=!0,this.config.inviteEmailEnableRecapcha&&window.siteConfig.recapchaPublicKey&&await this.$recaptcha("invite").then(a=>{this.token=a});let e=new FormData;if(this.csv_file){if(!this.checkUploadedData(this.csv_file,"csv"))return;e.append("csv_file",this.csv_file)}e.append("token",this.token),await S(e),this.csv_file=null,this.$refs.BaseInputFile.clearSelectedFile(),this.showSuccess(this.$t("Your invitation has been sent."))}catch(e){this.showError(e.error)}finally{this.csvLoading=!1}}}},V={class:"px-base-2 py-5 text-center"},x={class:"font-bold mb-base-2"},T={class:"mb-base-2"},U={class:"flex justify-between items-center gap-2 bg-web-wash px-5 py-base-2 rounded-base-10xl border border-dashed border-secondary-box-color dark:bg-dark-web-wash"},A=["value"],R={class:"font-bold mt-base-7 mb-base-2"},D={class:"mb-base-2"},K={class:"mb-base-2"},M={class:"font-bold mt-base-7 mb-base-2"},P={class:"mb-1"},N={class:"text-start mb-base-2"},Y=["href"];function j(e,a,q,H,i,l){const h=r("BaseIcon"),u=r("BaseInputText"),b=r("BaseTextarea"),m=r("BaseButton"),f=r("BaseInputFile");return C(),E("div",V,[s("p",x,t(e.$t("Invite by link")),1),s("p",T,t(e.$t("Copy the link below to invite people")),1),s("div",U,[s("input",{value:e.user.ref_url,id:"myUrl",class:"flex-1 truncate bg-transparent focus:outline-none"},null,8,A),s("button",{class:"flex align-items-center gap-2 whitespace-nowrap",onClick:a[0]||(a[0]=o=>l.copyURL())},[n(h,{name:"copy_link",class:"text-primary-color dark:text-dark-primary-color"}),s("span",null,t(e.$t("Copy link")),1)])]),s("p",R,t(e.$t("Invite by email")),1),s("form",{onSubmit:a[3]||(a[3]=I((...o)=>l.inviteEmails&&l.inviteEmails(...o),["prevent"]))},[s("div",D,[n(u,{modelValue:i.emails,"onUpdate:modelValue":a[1]||(a[1]=o=>i.emails=o),placeholder:e.$filters.numberShortener(e.config.inviteMax,e.$t("Add up to [number] email address, separated by commas"),e.$t("Add up to [number] email addresses, separated by commas")),tooltip_mobile:e.$filters.numberShortener(e.config.inviteMax,e.$t("Add up to [number] email address, separated by commas"),e.$t("Add up to [number] email addresses, separated by commas"))},null,8,["modelValue","placeholder","tooltip_mobile"])]),s("div",K,[n(b,{modelValue:i.message,"onUpdate:modelValue":a[2]||(a[2]=o=>i.message=o),placeholder:e.$t("Message"),rows:5},null,8,["modelValue","placeholder"])]),n(m,{loading:i.emailLoading,disabled:i.disableEmail},{default:c(()=>[d(t(e.$t("Send")),1)]),_:1},8,["loading","disabled"])],32),s("p",M,t(e.$t("Invite by CSV")),1),s("div",P,[n(f,{ref:"BaseInputFile",onUploadFile:l.selectFile,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},{default:c(()=>[d(t(e.$t("Import Contact")),1)]),_:1},8,["onUploadFile"])]),s("div",N,[s("a",{href:e.asset("files/invite_example.csv"),download:""},t(e.$t("Download csv sample")),9,Y)]),n(m,{loading:i.csvLoading,disabled:i.disableCsv,onClick:a[4]||(a[4]=o=>l.inviteCsvFile()),class:"mb-base-2"},{default:c(()=>[d(t(e.$t("Send")),1)]),_:1},8,["loading","disabled"])])}const O=k(L,[["render",j]]);export{O as default};
