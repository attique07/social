import{_ as w,aN as v,O as L,y as b,S as k,m as x,bb as B,q as c,bc as C,s as N,r as a,o as s,c as r,g as m,w as u,e as h,F as n,v as P,t as l,b as y,j as M,d as S,a as V}from"../../assets/app-73d10358.js";const D={components:{Error:v,Loading:L,BaseButton:b,StoryContentPreview:k},data(){return{error:null,loadmoreStatus:!1,loadingStories:!0,myStoriesList:[],page:1}},mounted(){this.getMyStoriesList(this.page)},computed:{...x(M,["deleteStoryItem"])},watch:{deleteStoryItem(){this.myStoriesList=this.myStoriesList.filter(e=>e.id!==this.deleteStoryItem.id)}},methods:{async getMyStoriesList(e){try{const t=await B(e);e===1?this.myStoriesList=t.items:this.myStoriesList=window._.concat(this.myStoriesList,t.items),t.has_next_page?(this.loadmoreStatus=!0,this.page++):this.loadmoreStatus=!1,this.loadingStories=!1}catch(t){this.error=t,this.loadingStories=!1}},showStoryDetail(e){let t=this.$router.resolve({name:"story_view_item",params:{storyItemId:e}});c(t.fullPath),this.$dialog.open(C,{data:{storyItemId:e},props:{class:"p-dialog-story p-dialog-story-detail p-dialog-no-header-title",modal:!0,showHeader:!1,draggable:!1},onClose:()=>{c(this.$router.currentRoute.value.fullPath),N()}})}}},E={key:0,class:"flex flex-wrap -mx-1 mb-base-2"},I=["onClick"],F={class:"bg-web-wash rounded-base-lg relative pb-story-ratio font-semibold bg-cover bg-center overflow-hidden"},U={key:1,class:"text-center"},$={key:3,class:"text-center"};function j(e,t,q,H,o,d){const p=a("Error"),g=a("Loading"),_=a("StoryContentPreview"),f=a("BaseButton");return s(),r(n,null,[o.error?(s(),m(p,{key:0},{default:u(()=>[S(l(o.error),1)]),_:1})):h("",!0),o.loadingStories?(s(),m(g,{key:1})):(s(),r(n,{key:2},[o.myStoriesList.length>0?(s(),r("div",E,[(s(!0),r(n,null,P(o.myStoriesList,i=>(s(),r("div",{key:i.id,class:"p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 cursor-pointer",onClick:O=>d.showStoryDetail(i.id)},[V("div",F,[y(_,{story:i,class:"text-lg"},null,8,["story"])])],8,I))),128))])):(s(),r("div",U,l(e.$t("No Stories")),1))],64)),o.loadmoreStatus?(s(),r("div",$,[y(f,{onClick:t[0]||(t[0]=i=>d.getMyStoriesList(o.page))},{default:u(()=>[S(l(e.$t("View more")),1)]),_:1})])):h("",!0)],64)}const T=w(D,[["render",j]]);export{T as default};
